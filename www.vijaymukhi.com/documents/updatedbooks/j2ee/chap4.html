<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.vijaymukhi.com/documents/updatedbooks/j2ee/chap4.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 14:39:31 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="chap4_files/filelist.html">
<title>Java Servlets </title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Mr. Vijay Mukhi</o:Author>
  <o:LastAuthor>Mr. Vijay Mukhi</o:LastAuthor>
  <o:Revision>9</o:Revision>
  <o:TotalTime>13</o:TotalTime>
  <o:Created>2004-10-21T06:22:00Z</o:Created>
  <o:LastSaved>2004-10-21T06:35:00Z</o:LastSaved>
  <o:Pages>21</o:Pages>
  <o:Words>7455</o:Words>
  <o:Characters>42496</o:Characters>
  <o:Company>V.M.C.I.</o:Company>
  <o:Lines>354</o:Lines>
  <o:Paragraphs>84</o:Paragraphs>
  <o:CharactersWithSpaces>52188</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:DrawingGridHorizontalSpacing>9.35 pt</w:DrawingGridHorizontalSpacing>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:553679495 -2147483648 8 0 66047 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:11.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	mso-font-kerning:0pt;
	font-weight:bold;
	text-decoration:underline;
	text-underline:single;}
h2
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:15.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	font-weight:bold;
	text-decoration:underline;
	text-underline:single;}
h3
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:16.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	font-weight:bold;
	text-decoration:underline;
	text-underline:single;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:11.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:#FF6600;}
p.MsoBodyText2, li.MsoBodyText2, div.MsoBodyText2
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:11.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyText3, li.MsoBodyText3, div.MsoBodyText3
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Book Antiqua";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.cbasetext, li.cbasetext, div.cbasetext
	{mso-style-name:"c\# base text";
	mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	font-size:11.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
p.programs, li.programs, div.programs
	{mso-style-name:programs;
	mso-style-parent:"c\# base text";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	font-size:10.0pt;
	font-family:Tahoma;
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:595.45pt 841.7pt;
	margin:.5in .5in .5in .5in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<h1 style='page-break-after:auto;mso-layout-grid-align:auto;punctuation-wrap:
hanging;text-autospace:ideograph-numeric ideograph-other;mso-vertical-align-alt:
auto'><span style='font-size:36.0pt;mso-bidi-font-size:12.0pt;font-family:"Times New Roman";
font-weight:normal;text-decoration:none;text-underline:none'>Java Servlets</span>
</h1>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext><span style='color:windowtext'>Servlets are memory-resident
Java programs, running inside a servlet container. Servlets are at the
frontline of Java web application development as they provide an easy way for
server side code to communicate with web-based clients. In simple words, they
are programs that run on a Web server and build Web pages. <o:p></o:p></span></p>

<p class=cbasetext><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=cbasetext><span style='color:windowtext'>Create a subdirectory
mservlet with the folder :
C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes.<o:p></o:p></span></p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes&gt;
md mservlet</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We will explain the reasons behind it once we see our
programs work. Now within this subdirectory create zzz.java with the following
code.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>…\classes\mservlet&gt;edit zzz.java</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>On compiling, javac gives an error because the extended
class is javax.servlet.http.HttpServlet and not HttpServlet. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>\mservlet&gt;javac zzz.java</p>

<p class=programs>zzz.java:1: cannot resolve symbol</p>

<p class=programs>symbol<span style="mso-spacerun: yes">  </span>: class
HttpServlet</p>

<p class=programs>location: class zzz</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs><span style="mso-spacerun: yes">                        
</span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Since we don't want the name to be lengthy, we will use the
import statement. Doing so will eliminate </p>

<p class=cbasetext>these errors. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Inspite of adding the import statement we yet see an error.
The code for applet.class and some basic classes is in some jar file and the
javac compiler by default looks at these jar files at compile time. A jar file
is collection of .class files. However, none of the jar files have the required
code for HttpServlet. Since the code of javax.servlet.http.HtttpServlet is untraceable,
an error apears.<span style="mso-spacerun: yes">  </span>The code for
javax.servlet.http.HttpServlet is in j2ee.jar, which is in the lib
subdirectory. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The ClASSPATH is an environmental variable and it may have
already been set to a certain path. The variable is to be reset for javac to
look at the new jar file. Thus to avoid overwriting the original
information,<span style="mso-spacerun: yes">  </span>we give the CLASSPATH
command as</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\javaprg&gt;set
CLASSPATH=C:\Sun\AppServer\lib\j2ee.jar;%CLASSPATH%</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Also, notice the use of package with the subdirectory name,
mservlet. Compile the code and we assure you there will be no errors.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Packages</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>If you had a class called Applet and if another user also
called his class Applet, then whose Applet gets called, yours or his? To
prevent a name clash, sun invented the concept of a package. They said that all
classes created by Sun would start with java. Unfortunately this does nothing
for a grouping. We would like all classes that deal with GUI issues to be
grouped together. Thus we have one more level i.e. all GUI classes are part of
java.awt and applet classes are a part of java.applet. Hence the full name of
the class Applet is java.applet.Applet and java.applet is the package name which
can be part of the import statement.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>However before we see our servlet in action, we have to add
a few entries to a file ‘web.xml’ in </p>

<p class=cbasetext>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Open the file using notepad and add the following entries at
the right position. Insert the block after HelloWorldExample. Though the order
is of no significance, we suggest that for the moment you do precisely as we
advise you to avoid any fallout.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Web.xml</p>

<p class=programs>..</p>

<p class=programs>..</p>

<p class=programs>..</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">        </span>&lt;servlet-name&gt;HelloWorldExample&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-class&gt;samples.webapps.simple.servlet.HelloWorldExample&lt;/servlet-class&gt;</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;/servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;zzz&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-class&gt;mservlet.zzz&lt;/servlet-class&gt;</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;/servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;RequestInfoExample&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-class&gt;samples.webapps.simple.servlet.RequestInfoExample&lt;/servlet-class&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;/servlet&gt;<span style="mso-spacerun: yes">  </span></p>

<p class=programs>..</p>

<p class=programs>..</p>

<p class=programs>..</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;HelloWorldExample&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;url-pattern&gt;/HelloWorldExample&lt;/url-pattern&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;/servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;zzz&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;url-pattern&gt;/zzz&lt;/url-pattern&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;/servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">        </span>&lt;servlet-name&gt;RequestInfoExample&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;url-pattern&gt;/RequestInfoExample/*&lt;/url-pattern&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;/servlet-mapping&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Start the Java Web server by Clicking on Start-Programs-Sun
Microsystem-J2EE 1.4 SDK- Start Default Server. First the DOS box comes up
detailing the server progress and then the server window is seen but minimized.
Once the server is ready to handle all requests, press a key in the dos box as
indicated. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now start any browser, it can be Internet Explorer or
Netscape, and give the site address as </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Output in browser window</p>

<p class=programs>HTTP Status 405 - HTTP method GET is not supported by this
URL type Status report</p>

<p class=programs>message HTTP method GET is not supported by this URL</p>

<p class=programs>description The specified HTTP method is not allowed for the
requested resource (HTTP method GET is not supported by this URL).</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Sun-Java</p>

<p class=cbasetext>The browser window will show you the following errors.
Though this is enough proof of our servlet being accessed, we modify the
program a bit to see it actually work. You will have to stop the server and
restart it again for every new change in the program.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Add a function named doGet to zzz.java. This function
receives two objects as parameters, req and res. req looks like
HttpServerRequest and res looks like HttpServerResponse. They are to be found
in HttpServlet. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Compile this program and you will get no error. By merely
adding this one line, you will find that the error vanishes. There are no
errors on the screen<span style="mso-spacerun: yes">  </span>because the server
detects the doGet function in the program. When zzz is loaded in the browser,
it displays a blank screen (no error). In Internet Explorer, click on View and
select Source, you will see html tags. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>View - Source</p>

<p class=programs>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0
Transitional//EN&quot;&gt;</p>

<p class=programs>&lt;HTML&gt;&lt;HEAD&gt;</p>

<p class=programs>&lt;META http-equiv=Content-Type content=&quot;text/html;
charset=windows-1252&quot;&gt;&lt;/HEAD&gt;</p>

<p class=programs>&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We obviously didn't give these tags in our program. Hence it
is assumed that the Java Web server created these tags and gave it to the
browser.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now a bit of explanations of our doings.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>First let's understand what this means. You are probably
aware that every phone has a unique phone number. Similarly, every computer on
the Net has a unique number. We can't just call it a number, so we call it an
IP address. For example, the Microsoft site, like all other sites, has a unique
IP address. If each computer on the Net were not identifiable by an IP address
then we would not be able to connect to them. Each machine also has a common IP
address 127.0.0.1 and can be represented as 'localhost'. You use this number to
refer to your machine. Both 127.0.0.1 and localhost are the same. Since the
address we're typing in is 127.0.0.1, it means that both the client and the
server are running on the same machine.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now, you may need to have ftp, email and http servers. That
however, doesn't mean that you need a separate machine for each of them. Each
packet on the internet has a number. For example, 25 is for email, 80 is for
http. So, instead of separate machines, we have separate ports. These packets
can be intercepted at the respective ports and passed on to the relevant
server. Every server runs on a particular port. Just as the http server runs on
port 80 and a smtp server runs on port 21, the Java Web server runs on port
8080. In case you want to change the port number or the original settings of
the server, you can do so by giving various options to startup. Since we are
not interested in doing this, we will simply use 8080. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>After giving address:port, give /webapps-simple/ followed by
the name of the class file, which is zzz. The /webapps-simple/, is converted to
a certain directory which is where Java will look for the zzz class file. This
is known as url mapping. In effect, you are mapping from a logical url to a
physical directory.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>If you recall, we had made a few entries in web.xml. Lets understand
these entries now.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;servlet&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;zzz&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-class&gt;mservlet.zzz&lt;/servlet-class&gt;</p>

<p class=programs><span style="mso-spacerun: yes">    </span>&lt;/servlet&gt;</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;servlet-mapping&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;servlet-name&gt;zzz&lt;/servlet-name&gt;</p>

<p class=programs><span style="mso-spacerun: yes">       
</span>&lt;url-pattern&gt;/zzz&lt;/url-pattern&gt;</p>

<p class=programs><span style="mso-spacerun: yes">   
</span>&lt;/servlet-mapping&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The url pattern /zzz is /zzz in the url address <a
href="http://127.0.0.1:8080/webapps-simple/zzz"><span style='font-family:"Book Antiqua"'>http://127.0.0.1:8080/webapps-simple/zzz</span></a></p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>This pattern is mapped to a servlet named zzz . Further, the
servlet zzz has a full name which is mservlet.zzz.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>This servlet class is searched for in the directories
assigned to the CLASSPATH variable. Once located, the class is loaded in
memory. Unfortunately, an error stating ‘HTTP method GET is not supported by
this URL’. This obviously implies that we have done something wrong or a lot
more must be added to see the servlet work. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>However, when the doGet function is inserted, as in , public
void doGet(HttpServletRequest req,HttpServletResponse res), the error
disappears. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>So with this brief understanding on servlets, lets proceed
further to explore the possibilities when working with the Java Web Server. The
Web Server is another name for the File Server. The web server is expected to
send an html file over. So, create a html file z.html in
C:\Sun\AppServer\domains\domain1\docroot&gt; and type the following.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\docroot&gt;edit z.html</p>

<p class=programs>z.html</p>

<p class=programs>Hi </p>

<p class=programs>Bye </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now view it in the browser by typing </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/z.html</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>You will see Hi and Bye displayed in the browser window thus
proving that the web server sends z.html over to the browser. However, all of
this is static. What we need are pages which are dynamically generated. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>For this, the web server calls another program that
processes the input and creates an html file. This is called CGI Programming.
The web server simply sends the generated html file across to the browser. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>So lets proceed in this direction.<span style="mso-spacerun:
yes">  </span>Take the next program and see what it displays.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In the earlier chapters, we learnt about System.out.println.
Here we are giving &lt;b&gt;Bye as a parameter to this function. When you run
the servlet,(remember to stop the server and then start it again) you will see
a blank screen as before. View Source shows the same html file. But if you look
at the log file i.e., C:\Sun\AppServer\domains\domain1\logs\server.log, it will
show you &lt;b&gt;Bye.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>System.out.println redirects its output to the log file.
This proves that the function doGet is indeed being called by the web server. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Our aim is to send an html file accross. So, let's see how
the servlet gives the web server an html file which will then be sent to the
browser. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>PrintWriter out;</p>

<p class=programs>out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
zzz.java</p>

<p class=programs>zzz.java:7: cannot resolve symbol</p>

<p class=programs>symbol<span style="mso-spacerun: yes">  </span>: class
PrintWriter</p>

<p class=programs>location: class mservlet.zzz</p>

<p class=programs>PrintWriter out;</p>

<p class=programs>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>This program creates a variable 'out' which looks like
PrintWriter. It also uses res, a parameter passed to doGet, which looks like
HttpServletResponse. res has a member named getWriter which returns an object
that looks like PrintWriter. PrintWriter has a member named println and hence
the next line says out.println. This function is similar to System.out.println
in terms of syntax. With System.out.println, 'out' was a member of System, but
here out is a member of the PrintWriter class. The only problem here is that the
name is not PrintWriter and hence we get all these errors.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Printwriter is not part of javax.servlet.http.HttpServlet
but of java.io. Its full name is java.io.PrintWriter. So we add the import
statement as shown below. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Here, getWriter throws an IOException. This exception is
thrown when it cannot create an object like PrintWriter. The error is shown
below. We won't talk about errors any more, instead we'll say that an exception
occurred. To handle the exception, we have to catch it. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
zzz.java</p>

<p class=programs>zzz.java:8: unreported exception java.io.IOException; must be
caught or declared</p>

<p class=programs><span style="mso-spacerun: yes"> </span>to be thrown</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs><span style="mso-spacerun:
yes">                               </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We now have to use try and catch in order to handle the
exception.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Note that we have given &quot;&lt;b&gt;Bye&quot; to
out.println. This is because &lt;b&gt; in html means bold. We want Bye to be
displayed in bold letters and the &lt;b&gt; tag will allows us to do that.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We are not catching the IOException exception thrown by
getWriter but instead are catching Exception. We are using Exception because it
catches all the exceptions that can ever occur. There is a possibility that
getWriter may throw two different exceptions; in that case you will have to
catch both of them with separate try-catchs. The right way to catch exceptions
is to have a separate try and catch for every function that throws an
exception. We are however, using a single try block for all the statements so
that we don't have to worry about the exceptions that occur. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now, run the program from the browser. Great! Finally, you
get to see Bye on the screen! Click on View source and it will give you
&lt;b&gt; and Bye.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>View Source</p>

<p class=programs>&lt;b&gt;Bye</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Let's say we have a file a.html. When the web server sends a
file over, it initially sends some data headers and then the html file. The
first line of the header in most cases is </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>HTTP/1.0 200 OK. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>HTTP stands for the hyper text transfer protocol. A protocol
is a set of rules, thus the http protocol has specifications on how a browser
communicates with a web server. It decides on issues like port nos to be used
for communication, the error codes and what they mean and so forth. All web
servers follow the http protocol. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/plain&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz</p>

<p class=programs>View Source</p>

<p class=programs>&lt;b&gt;Bye</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>A header is always sent along with any file. The browser
recognizes the type of the document being received by looking at its headers.
Thus, if the browser<span style="mso-spacerun: yes">  </span>receives
text/plain, it will display the text as is. However, if it sees the header with
text/html then it will display the text in the html format. When the header for
Content-Type is not set, it is assumed to be text/html.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The doGet function has two parameters, res and req. The
client date is available in req whereas the servlet data that is to be
transmitted to the browser is given in res.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>res thus has functions that aids in sending data to the web
server which ultimately is passed to the browser. res, that looks like
HttpServletResponse, has a function named ContentType which by default is set
to text/html. In the above program, we have changed it to text/plain, as in<span
style="mso-spacerun: yes">  </span>res.SetContentType(&quot;text/plain&quot;).
The actual headers that eventually get generated is :</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Content-Type: text/plain</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>A header is sent before the actual data and it consists of
words which end in a colon. These words give information on the file being sent
across. Content-Type is a header which notifies the browser on the nature of
the file being sent across. Text/plain is called a mime type. If it is
image/gif, then the browser would know that it is receiving a picture file
which has a gif file format.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Even though, in the program, we did not specify any headers,
the java web server sends a large number of them over. We have the option of
changing the values of these headers<span style="mso-spacerun: yes">  </span>as
well as send our own.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Once the browser knows that the text coming in is an html
file, it interprets &lt;b&gt; and displays the remaining text in bold. It works
perfectly and as advertised, hence the Bye becomes bold. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>You can change it back to text/html if you like, though not
necessary as the default is text/html. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>These programs that we have been writing so far are called
Servlets. Why so? Well because they are derived from HttpServlet. A servlet is
a class which is derived from HttpServlet.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>An alternative to try-catch is the the throws clause
followed by the exception. The function doGet, in the following example is
adjuncted with throws IOexception. Hence, you don't have to put a 'try-catch'
within the code for the functions throwing exceptions. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;HTML&gt; &lt;b&gt;hi
&lt;/HTML&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Here, in out.println we have included the &lt;HTML&gt;
&lt;/HTML&gt; tag. Normally, html code is written within the html tag. Since
html is forgiving, it doesn't matter if you choose not to include these tags.
That's the reason we got away with it in our earlier program. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>It is good programming practice to close a file and if you
don't, it is closed by default. out.close closes the newly generated file. This
servlet will dispaly 'hi' in the browser window. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>View Source</p>

<p class=programs>&lt;HTML&gt; &lt;b&gt;hi &lt;/HTML&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>When we want to dynamically generate html files, we use
programs written in C, Perl, Java etc. Perl is an interpreted language and so
it is very slow however Java servlets once loaded in memory remain residents
and are thus quite fast. Perl as a program is called each time the program
needs to be run. Perl runs, generates a file and then quits. If a Perl program
is required to connect to a database, maybe to retrieve data and then
disconnect, imagine the amount of time involved to complete the transaction!.
This CGI program is great if it is for a few connections but not for a million
connections. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Servlets remain loaded in memory, they are not unloaded. To
prove this, all that we do in the next program is, display the value of i,
which is a variable created outside a function. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>int i = 0;</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>i++;</p>

<p class=programs>out.println(&quot;&lt;HTML&gt; hi &quot; + i + &quot;
&lt;/HTML&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Here we are incrementing i by 1 in the function doGet. The
first time that doGet gets called, i will be incremented by 1, and then each
time you click on Refresh, it will keep incrementing by 1. This proves that the
code is memory-resident. This is one of the reasons why you need to stop your
server and then restart it if you want to use the same servlet. Also try using
a fresh copy of IE or Netscape and you'll notice that the value of i is
retained across browsers. Hence if it is 3 in the first copy, clicking on
Refresh in the second will make it 4 and then clicking on Refresh in the first
copy makes it 5. Thus, we can see that servlets never get removed from memory.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The web server sent Content-Type as one of the headers to
the web browser. Similarly, there are headers that are sent by the web browser
to the web server. To figure out what these headers are, HttpServletRequest is
given as a parameter to doGet.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;HTML&gt;&quot;);</p>

<p class=programs>out.println( &quot;Request method : &quot; +
req.getMethod()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Request URI : &quot;+
req.getRequestURI()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Request protocol : &quot;+
req.getProtocol()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Servlet path : &quot; +
req.getServletPath()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Path info : &quot; +
req.getPathInfo()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Path translated : &quot; +
req.getPathTranslated()+&quot;&lt;p&gt;&quot;);</p>

<p class=programs>out.println( &quot;Query string : &quot; +
req.getQueryString()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Content length : &quot; +
req.getContentLength()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Content type : &quot; +
req.getContentType()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Server name : &quot; +
req.getServerName()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Server port : &quot; +
req.getServerPort()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Remote user : &quot; +
req.getRemoteUser()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Remote address : &quot; +
req.getRemoteAddr()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Remote host : &quot;+
req.getRemoteHost()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println( &quot;Authorization scheme : &quot; +
req.getAuthType()+&quot;&lt;p&gt;&quot;); </p>

<p class=programs>out.println(&quot;getCharacterEncoding:&quot; +
req.getCharacterEncoding()+&quot;&lt;p&gt;&quot;);</p>

<p class=programs>out.println(&quot;getScheme: &quot; + req.getScheme());</p>

<p class=programs>out.println(&quot;&lt;/HTML&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In Internet Explorer, the functions returned the following
values:</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Request method : GET </p>

<p class=programs>Request URI : /webapps-simple/zzz </p>

<p class=programs>Request protocol : HTTP/1.1 </p>

<p class=programs>Servlet path : /zzz </p>

<p class=programs>Path info : null </p>

<p class=programs>Path translated : null </p>

<p class=programs>Query string : null </p>

<p class=programs>Content length : -1 </p>

<p class=programs>Content type : null </p>

<p class=programs>Server name : 127.0.0.1 </p>

<p class=programs>Server port : 8080 </p>

<p class=programs>Remote user : null </p>

<p class=programs>Remote address : 127.0.0.1 </p>

<p class=programs>Remote host : 127.0.0.1 </p>

<p class=programs>Authorization scheme : null </p>

<p class=programs>getCharacterEncoding:null </p>

<p class=programs>getScheme: http </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>To understand all these headers, you have to go to the
relevant RFC (Request For Comments). RFC's are internet standards. The RFC will
tell you what each one of the headers is all about. There are thousands of RFCs
on the net so you will have to find and read the RFC about the HTTP protocol.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Thus, the servlet knows about the server and user's data
from the headers sent in by the server.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In the browser address bar type the url as:
http://127.0.0.1:8080/webapps-simple/zzz?pqr=abcd </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The output now changes slightly </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Request method : GET </p>

<p class=programs>Request URI : /webapps-simple/zzz </p>

<p class=programs>Request protocol : HTTP/1.1 </p>

<p class=programs>Servlet path : /zzz </p>

<p class=programs>Path info : null </p>

<p class=programs>Path translated : null </p>

<p class=programs>Query string : pqr=abcd </p>

<p class=programs>Content length : -1 </p>

<p class=programs>Content type : null </p>

<p class=programs>Server name : 127.0.0.1 </p>

<p class=programs>Server port : 8080 </p>

<p class=programs>Remote user : null </p>

<p class=programs>Remote address : 127.0.0.1 </p>

<p class=programs>Remote host : 127.0.0.1 </p>

<p class=programs>Authorization scheme : null </p>

<p class=programs>getCharacterEncoding:null </p>

<p class=programs>getScheme: http </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Observe the Query string value. In the earlier case it had a
null value whereas now it holds the characters after the ? in the url.</p>

<p class=cbasetext>Query string : pqr=abcd </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>String aa;</p>

<p class=programs>aa = req.getParameter(&quot;pqr&quot;);</p>

<p class=programs>out.println(&quot;&lt;HTML&gt;&quot;);</p>

<p class=programs>out.println( &quot;pqr is &quot; + aa); </p>

<p class=programs>out.println(&quot;&lt;/HTML&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz?pqr=abcd</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>getParameter is a function in HttpServletRequest. To this
function, a parameter pqr is given. req.getParameter removes the = sign and
assigns the value of pqr ie abcd to aa. In the url, we've given pqr=abcd, so
the string aa becomes abcd.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>pqr is abcd </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>This is how the servlet can figure out what the user has
typed. Once you press enter, the screen will show ‘pqr is abcd’. If instead of
abcd you had initialized pqr to abcd xyz then aa would return abcd xyz.</p>

<p class=cbasetext>http://127.0.0.1:8080/webapps-simple/zzz?pqr=abcd xyz</p>

<p class=cbasetext>The browser screen would have </p>

<p class=cbasetext>pqr is abcd xyz </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>and the url would change to </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz?pqr=abcd%20xyz</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>There is %20 in the place of a space. At times instead of a
'%' sign it may also show a '+' sign. The RFC forbids you to use certain
characters like spaces so they are encoded as '+' or '%'. Since we can't use
reserved characters in a url, they have to be replaced with their hexadecimal
equivalent. To sum up , if you use the reserved characters in a URL, then as
specified in the RFC, they are converted to hexadecimal characters.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Let's create an html file where you can enter some text in a
text box. Remember webapps\root is where you create the file.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;edit a.html</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs><u>a.html<o:p></o:p></u></p>

<p class=programs>&lt;form action=&quot;http://127.0.0.1:8080/aa.html&quot;&gt;</p>

<p class=programs>&lt;input type=text name=pqr&gt;</p>

<p class=programs>&lt;input type=submit value=search&gt;</p>

<p class=programs>&lt;/form&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Form is the tag used for creating a form in html. input
type=text specifies that we want to create a text box and the name of that text
box is pqr. So, this will display a simple text box. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Type the following in the address bar</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/a.html </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now type 'abcd' in the text box and press enter or click on
search. Take note of the url in the address bar. It says</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/aa.html?pqr=abcd</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Earlier, we typed a similar url ourselves in the address
bar. Now we are generating it through the html file. Ignore the error that you
see in the browser window.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now, if you want to search for some word in a search engine,
you will type that word in the text box and press enter. The search engine will
search its database for that word and provide a list of all the sites that are
related to it. This list will then be passed on to a program which will
generate an html file.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now edit your a.html file to match the following</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>a.html</p>

<p class=programs>&lt;form action=&quot;http://127.0.0.1:8080/aa.html&quot;&gt;</p>

<p class=programs>&lt;input type=text name=pqr&gt;</p>

<p class=programs>&lt;input type=text name=aa&gt;</p>

<p class=programs>&lt;input type=submit value=search&gt;</p>

<p class=programs>&lt;/form&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Here, we have an additional text box called aa and a button
called submit.</p>

<p class=cbasetext>Excecute it from the browser. Type abcd in the first text
box and efgh in the second. Now click on the submit button. It will display for
you the following url</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/aa.html?pqr=abcd&amp;aa=efgh </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Thus you can have many name value pairs in the url, each
seperated by &amp;, after the '?'. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In all these programs, we have been seeing the parameters in
the url. We now have a servlet which takes these values and displays them in
the browser. So, lets rewrite the servlet and compile it and then create a
small html file that does this for us. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>String aa,bb;</p>

<p class=programs>aa = req.getParameter(&quot;pqr&quot;);</p>

<p class=programs>bb = req.getParameter(&quot;xyz&quot;);</p>

<p class=programs>out.println(&quot;&lt;HTML&gt;&quot;);</p>

<p class=programs>out.println( &quot;pqr is &quot; + aa + &quot; xyz &quot; +
bb); </p>

<p class=programs>out.println(&quot;&lt;/HTML&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>If you are using many values in the address line, use
getParameter as before. As long as you know the name of the textbox, you can
get the related value without a problem. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>b.html</p>

<p class=programs>&lt;html&gt;</p>

<p class=programs>&lt;b&gt;Test&lt;/b&gt;</p>

<p class=programs>&lt;form
action=&quot;http://127.0.0.1:8080/webapps-simple/zzz&quot;
method=&quot;get&quot;&gt;</p>

<p class=programs>&lt;input type=text name=&quot;pqr&quot;&gt;</p>

<p class=programs>&lt;input type=text name=&quot;xyz&quot;&gt;</p>

<p class=programs>&lt;input type=submit value=&quot;Click...&quot;&gt;</p>

<p class=programs>&lt;/form&gt;</p>

<p class=programs>&lt;/html&gt;</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Save the html file in
C:\Sun\AppServer\domains\domain1\docroot&gt;. Then, in the browser enter the
url as </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/b.html</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In the text boxes, type in 'hi' in the first one and 'bye'
in the second. When we click on the button labeled Click, a new screen similar
to the one seen before emerges in the window. Our program, zzz, gets called.
This is because we specified it in action. Also, we have specified method=get.
When we use get, whatever you type in the text box, along with its name,
becomes a part of the url. Give the method as post and you will see that the
fields are not sent as a part of the url. They are sent separately. We will explain
get and post later.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Note the url in the address bar</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/webapps-simple/zzz?pqr=hi&amp;xyz=bye</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>zzz generates an html file depending on what we type in the
text boxes. req.getParameter picks up the values for the names specified.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>pqr is hi xyz bye </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>What we have been trying to explain is called CGI
Programming. CGI stands for Common Gateway Interface. It details how data is
transferred from the browser to the web server and vice-versa. When we visit a
site, it may ask us to fill up a form. The data we key in is sent to the server
as name value pairs. The name is the name of the text box and the value is what
we key in the text boxes.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The Java Web Server has a large number of properties. A
property is a name with an associated value.When you say aa=bb, aa is the name
of the property, bb its value.You can have hundreds of such properties. As the
name of the property changes, the value changes too. What you need to do for
one, you need to do for all. In such cases where the definit count is not
available, , we use an Enumeration.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>An Enumeration represents an array, enumeration means more
than one of the same thing. Ten people become an enumeration. What can be done
with one can be repeated for all ten. So, an enumeration is like a for statement
where you simply repeat. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We need an object that looks like an Enumeration,
props.propertyNames() returns a similar object. This object is stored in a
variable called enprop. enprop denotes all the property names. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Many functions return an Enumeration. Any Enumeration has a
member function named hasMoreElements. Lets look at the next program which
demonstrates this feature.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.util.*;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req, HttpServletResponse
res) </p>

<p class=programs>throws IOException {</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;Parameters:&lt;p&gt;&quot;);</p>

<p class=programs>Enumeration pNames = req.getParameterNames();</p>

<p class=programs>while (pNames.hasMoreElements()) {</p>

<p class=programs>String name = (String) pNames.nextElement();</p>

<p class=programs>String[] val = req.getParameterValues(name);</p>

<p class=programs>out.println(&quot; &quot; + name + &quot;:&quot;);</p>

<p class=programs>for (int i = 0; i &lt; val.length; i++) {</p>

<p class=programs>out.println(&quot; &quot; + val[i] + &quot;&lt;p&gt;&quot;);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The req.getParameterNames returns a string. The value is not
a single value but an array of strings. Hence we have used val.length to find
the number of members in the array. The for loop allows us to display them. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Whenever we have more than one name/value pair, the function
returns an enumeration which then uses the same while loop to display all the
multiple values. Enumeration makes the programmers life easier.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In the same way, we can get the header names and cookies.
Thus, even though you don't know about cookies as yet you are able to do
this.Cookies have been dealt with in one of our chapters further on.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.util.*;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req, HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;Request headers:&quot;);</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Enumeration hNames = req.getHeaderNames();</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>while (hNames.hasMoreElements()) {</p>

<p class=programs>String name = (String) hNames.nextElement();</p>

<p class=programs>String value = req.getHeader(name);</p>

<p class=programs>out.println(&quot; &quot; + name + &quot; : &quot; + value);</p>

<p class=programs>out.println(&quot;&lt;br&gt;&quot;);</p>

<p class=programs>}</p>

<p class=programs>out.println();</p>

<p class=programs>out.println(&quot;Cookies:&quot;);</p>

<p class=programs>Cookie[] cookies = req.getCookies();</p>

<p class=programs>if (cookies ==<span style="mso-spacerun: yes">  </span>null)</p>

<p class=programs>out.println(&quot;None&quot;);</p>

<p class=programs>else</p>

<p class=programs>for (int i = 0; i &lt; cookies.length; i++) {</p>

<p class=programs>String name = cookies[i].getName();</p>

<p class=programs>String value = cookies[i].getValue();</p>

<p class=programs>out.println(&quot; &quot; + name + &quot; : &quot; + value);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>Output</p>

<p class=programs>Request headers: accept : image/gif, image/x-xbitmap, image/jpeg,
image/pjpeg, application/vnd.ms-powerpoint, application/vnd.ms-excel,
application/msword, application/x-shockwave-flash, */* <br>
accept-language : en-us <br>
accept-encoding : gzip, deflate <br>
user-agent : Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR
1.0.3328) <br>
host : 127.0.0.1:8080 <br>
connection : Keep-Alive <br>
Cookies: None</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Since we don't have any cookies at present, we don't see
anything. If you have understood the earlier example then this one will be a
cake walk. It is basically for accessing multiple things that are similar. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We also see a list of headers<span style="mso-spacerun:
yes">  </span>sent by the browser.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In servlets, you can do anything you want. You can pick up
an html file from your hard disk and send it over or go to another site on the
net, pick up an html file from there and send it across. Let's see how the
second method works. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import java.net.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res) throws IOException</p>

<p class=programs>{</p>

<p class=programs>URL u;URLConnection c;InputStream n;DataInputStream d;String
s;</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;HTML&gt;&quot;);</p>

<p class=programs>out.println(&quot;&lt;head&gt;&lt;title&gt;Hello
World&lt;/title&gt;&lt;/head&gt;&quot;);</p>

<p class=programs>out.println(&quot;&lt;body&gt;&quot;);</p>

<p class=programs>out.println(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</p>

<p class=programs>try {</p>

<p class=programs>u=new URL(&quot;http://www.yahoo.com&quot;);</p>

<p class=programs>c = u.openConnection();</p>

<p class=programs>n = c.getInputStream();</p>

<p class=programs>d=new DataInputStream(n);</p>

<p class=programs>while ((s=d.readLine()) != null )</p>

<p class=programs>out.println(s);</p>

<p class=programs>n.close();</p>

<p class=programs>}</p>

<p class=programs>catch(Exception x){}</p>

<p class=programs>out.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);</p>

<p class=programs>out.close();</p>

<p class=programs>} </p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>This program retrieves a page from the net and sends it to
the browser. Let's understand the mechanics of it.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>A url identifies a resource. So 'new URL' takes a string, a
site address or a url and returns an object that looks like URL. Here we have
given our site address, so make sure that you are connected to the Internet. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The object that looks like URL has a function named
openConnection. 'u' is just the form of the url. It is broken up into protocol,
portno, address parameter and other things like that. It actually uses the TCP
protocol to physically connect to the webserver and returns an object that
stands for the connection. That is why c is not a URL, but an object that looks
like a URLConnection. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now we need to read and write to this connection. The
getInputStream function of URLConnection returns an object that looks like
InputStream from where you can read stuff. The only problem is that the
InputStream is too low level. To read data from this stream, an object that
looks like DataInputStream is created. The developers of Java could have
stopped at InputStream but they want us to use DataInputStream. You must be
asking yourself useless questions like 'Why'? Don't torture yourself with the
unnecessary! </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>DataInputStream has functions like readLine, which returns
data one line at a time. When there are no more lines to return, it returns a
null. Once some data is received, out.println is used to display it in the
browser and the stream is then closed. One of the functions throws an exception
and we catch the exception so that the program ends normally. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>An applet is a Java program that runs within your browser.
The browser has an applet engine which executes the code coming in from across
the net. A servlet is also a Java program but it executes on the server. Unlike
the browser, the server doesn't execute a servlet but instead calls a program
named Servlet Engine. This program executes the Java code. Just as an applet
must be derived from Applet, a servlet must be derived from Servlet.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The whole idea behind servlets is that the Servlet Engine
executes Java code, which creates the html file and gives it to the web server.
The web server then sends it across to the browser. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>public class zzz extends Servlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\</p>

<p class=programs>WEB-INF\classes\mservlet&gt; javac zzz.java</p>

<p class=programs>zzz.java:1: cannot resolve symbol</p>

<p class=programs>symbol<span style="mso-spacerun: yes">  </span>: class
Servlet</p>

<p class=programs>location: class zzz</p>

<p class=programs>public class zzz extends Servlet</p>

<p class=programs><span style="mso-spacerun: yes">                        
</span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In this program, zzz extends Servlet. HttpServlet, which we
used earlier, too is derived from Servlet. Had we derived from Servlet in the
earlier programs, then our programming would have been more tedious. So, to demonstrate
and appreciate how HttpServlet makes life easier for us, we will extend
Servlet. We know that HttpServlet is derived from Servlet because we looked at
the source code. If you have downloaded Jakarta-Tomcat with the source code
option then you can edit the file HttpServlet.java and see for yourself.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Coming back to our program, let's compile it. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The compiler comes back with an error saying Servlet not
found. We got an error because we have not specified the full name. To remove
the error, give an import statement because the full name is
javax.servlet.Servlet. We know that this is the full form becuase we looked at
an existing example. Also be sure to set the classpath as before.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz extends Servlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;javac zzz.java</p>

<p class=programs>zzz.java:2: no interface expected here</p>

<p class=programs>public class zzz extends Servlet</p>

<p class=programs><span style="mso-spacerun: yes">                        
</span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Giving the full name does not seem enough! Javac comes back
with an error because it knows javax.servlet.Servlet to be an interface. An
interface and a class look the same. The help files will tell you that Servlet
is an interface. You cannot distinguish between a interface and a class using
just the name.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;javac zzz.java</p>

<p class=programs>zzz.java:2: zzz is not abstract and does not override
abstract method service(ja</p>

<p class=programs>vax.servlet.ServletRequest,javax.servlet.ServletResponse) in
javax.servlet.Servl</p>

<p class=programs>et</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs><span style="mso-spacerun: yes"> </span><span
style="mso-spacerun: yes">      </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>To use an interface, we write 'implements Servlet'. We've
explained earlier that an interface is a collection of function prototypes.
Unfortunately, when we say implements Servlet, we get an errors. Runnable had
only one function called run, this one has 5 functions. For the time being it
is showing us only one error. The service method is to be implemented in the
file. So we modify our program to bring in this method as in:</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;javac zzz.java</p>

<p class=programs>zzz.java:2: zzz is not abstract and does not override
abstract method init(javax</p>

<p class=programs>.servlet.ServletConfig) in javax.servlet.Servlet</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs><span style="mso-spacerun: yes">       </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Tagging a class<span style="mso-spacerun: yes">  </span>with
implements Servlet guarantees the class to looks like the Servlet class. Thus,
it must define all the five functions present in the Servlet class. The Java
Web server expects a class derived from Servlet, therefore it is a must to have
the same five functions.<span style="mso-spacerun: yes">  </span>The five
errors that pop up one after the other would be</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java:2: class zzz must be declared abstract. It does not
define void destroy() from interface javax.servlet.Servlet.</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>^</p>

<p class=programs>zzz.java:2: class zzz must be declared abstract. It does not
define void service(javax.servlet.ServletRequest,
javax.servlet.ServletResponse) from interface javax.servlet.Servlet.</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>^</p>

<p class=programs>zzz.java:2: class zzz must be declared abstract. It does not
define void init(javax.servlet.ServletConfig) from interface
javax.servlet.Servlet.</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>^</p>

<p class=programs>zzz.java:2: class zzz must be declared abstract. It does not
define java.lang.String getServletInfo() from interface javax.servlet.Servlet.</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>^</p>

<p class=programs>zzz.java:2: class zzz must be declared abstract. It does not
define javax.servlet.ServletConfig getServletConfig() from interface javax.servlet.Servlet.</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>^</p>

<p class=programs>5 errors</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>So, we create these five functions in zzz and the only
statement included in these functions is System.out.println. This is what the
next program shows.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>ServletConfig a;</p>

<p class=programs>public void destroy()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;destroy&quot;);</p>

<p class=programs>}</p>

<p class=programs>public String getServletInfo()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletInfo&quot;);</p>

<p class=programs>return &quot;&quot;;</p>

<p class=programs>}</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs>public void init(ServletConfig a)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;init&quot;);</p>

<p class=programs>}</p>

<p class=programs>public ServletConfig getServletConfig()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletConfig&quot;);</p>

<p class=programs>return (ServletConfig) a;</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Well, it does work! It shows a valid blank screen. But to
actually confirm that the servlet has worked, open up the server log file. Out
of the 5 functions, only two of them get called, init and service. init gets
called once and service gets called each time refresh is clicked. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>[#|2004-10-06T11:10:26.638+0530|INFO|sun-appserver-pe8.0|javax.enterprise.system.stream.out|_ThreadID=11;|</p>

<p class=programs>init|#]</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>[#|2004-10-06T11:10:29.562+0530|INFO|sun-appserver-pe8.0|javax.enterprise.system.stream.out|_ThreadID=11;|</p>

<p class=programs>service|#]</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>A function returning void must not have a return value. But
if it returns a String, then it must be a meaningful string or an empty string
(which is two double quotes). When the function returns a ServletConfig then
the return value must be a ServletConfig. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We will verify the above with a return 0 for all the
functions as shown in the following program.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>ServletConfig a;</p>

<p class=programs>public void destroy()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;destroy&quot;);</p>

<p class=programs>}</p>

<p class=programs>public String getServletInfo()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletInfo&quot;);</p>

<p class=programs>return &quot;&quot;;</p>

<p class=programs>}</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs>public void init(ServletConfig a)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;init&quot;);</p>

<p class=programs>}</p>

<p class=programs>public ServletConfig getServletConfig()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletConfig&quot;);</p>

<p class=programs>return 0;</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
zzz.java</p>

<p class=programs>zzz.java:27: incompatible types</p>

<p class=programs>found<span style="mso-spacerun: yes">   </span>: int</p>

<p class=programs>required: javax.servlet.ServletConfig</p>

<p class=programs>return 0;</p>

<p class=programs><span style="mso-spacerun: yes">       </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Thus it proves that the function must return a
ServletConfig. </p>

<p class=cbasetext>For this purpose, 'a' is made a public variable, which looks
like ServletConfig and is returned from getServletConfig. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now you're probably wondering why we've made it public and
haven't put it in the function itself. Well, in that case you will have to use
new. Let's see what happens. Make the changes in the program as shown below.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>public void destroy()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;destroy&quot;);</p>

<p class=programs>}</p>

<p class=programs>public String getServletInfo()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletInfo&quot;);</p>

<p class=programs>return &quot;&quot;;</p>

<p class=programs>}</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs>public void init(ServletConfig a)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;init&quot;);</p>

<p class=programs>}</p>

<p class=programs>public ServletConfig getServletConfig()</p>

<p class=programs>{</p>

<p class=programs>ServletConfig a;</p>

<p class=programs>a=new ServletConfig();</p>

<p class=programs>System.out.println(&quot;getServletConfig&quot;);</p>

<p class=programs>return (ServletConfig)a;</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
zzz.java</p>

<p class=programs>zzz.java:24: javax.servlet.ServletConfig is abstract; cannot
be instantiated</p>

<p class=programs>a=new ServletConfig();</p>

<p class=programs><span style="mso-spacerun: yes">  </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>You will now get an error saying you can't instantiate from
an interface. There is no other way out. We have to make it public. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now let's do something smart. It may be too much to ask but
we believe in making the impossible possible! Put all the code that was in
doGet into service within the try and the catch. Everything works as
advertised. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz implements Servlet</p>

<p class=programs>{</p>

<p class=programs>ServletConfig a;</p>

<p class=programs>public void destroy()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;destroy&quot;);</p>

<p class=programs>}</p>

<p class=programs>public String getServletInfo()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletInfo&quot;);</p>

<p class=programs>return &quot;&quot;;</p>

<p class=programs>}</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs>public void init(ServletConfig a)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;init&quot;);</p>

<p class=programs>}</p>

<p class=programs>public ServletConfig getServletConfig()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;getServletConfig&quot;);</p>

<p class=programs>return (ServletConfig) a;</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>As before, init and service are called. Service takes the
same parameters as doGet. So we follow the same logic, that is, create a
PrintWriter and write to the PrintWriter. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Earlier, we derived from HttpServlet. HttpServlet has the
same five functions that we have in zzz, so it's possible to replace
HttpServlet with zzz. In either case, the Java Web server calls init only once.
If you have an init in your program then that's the one that's called, else,
the init in HttpServlet is called. Both init's don't do anything right now and
it is upto you to decide if you want init to do something. You can put code
that is to be executed once in init.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The Java Web server calls service. Service has the
getparameter function to figure out whether the http method was 'post' or
'get'. It is called with the same parameters and it puts these on the stack. It
in turn calls doGet or doPost. The destroy gets called only at the end.
Remember, with get, the parameters are sent with the url as one packet, but
with post, a seperate packet is sent. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>We implement from Servlet because the Java Web server insists
that we do so. If you remove implements Servlet from zzz it will give you tons
of errors. This shows that HttpServlet does implement servlet. You must have
the five functions, but the order of functions is not important. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The Java developers realized that programmers would not like
the idea of writing these functions each time, so they created a class called
GenericServlet containing these functions. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>In the next program, zzz extends GenericServlet. On saying
javac, it gives an error on service.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz extends GenericServlet</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
zzz.java</p>

<p class=programs>zzz.java:3: mservlet.zzz is not abstract and does not
override abstract method s</p>

<p class=programs>ervice(javax.servlet.ServletRequest,javax.servlet.ServletResponse)
in javax.serv</p>

<p class=programs>let.GenericServlet</p>

<p class=programs>public class zzz extends GenericServlet</p>

<p class=programs><span style="mso-spacerun: yes">       </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The earlier versions had provided us with the source code
for GenericServlet.java. Anyways, GenericServlet class has the service function
but it is declared abstract. So, we will have to write our own service
function. We will explain what we mean by that with the help of an example.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>xxx.java</p>

<p class=programs>interface xxx</p>

<p class=programs>{</p>

<p class=programs>public void aaa();</p>

<p class=programs>public void bbb();</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;javac xxx.java</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>yyy.java</p>

<p class=programs>public abstract class yyy implements xxx</p>

<p class=programs>{</p>

<p class=programs>public void aaa()</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=programs>public abstract void bbb();</p>

<p class=programs>}</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>&gt;javac yyy.java</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>If you get errors stating it cannot resolve symbol xxx ,
then ensure that your classpath variable is set to the current directory as
well.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>set CLASSPATH=.;%CLASSPATH%</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Now let's create ppp.java and extend from yyy.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>ppp.java</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class ppp extends yyy</p>

<p class=programs>{</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\webapps-simple\WEB-INF\classes\mservlet&gt;javac
ppp.java</p>

<p class=programs>ppp.java:2: ppp is not abstract and does not override
abstract method bbb() in yyy</p>

<p class=programs>public class ppp extends yyy</p>

<p class=programs><span style="mso-spacerun: yes">       </span>^</p>

<p class=programs>1 error</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Compiling ppp.java results in the same error as seen with
GenericServlet. That means when a function is declared as abstract in the class
we are extending from, we cannot directly use it. Instead we have to write our
own function i.e we have to override it. </p>

<p class=cbasetext>The class yyy implements an interface xxx. xxx has 2
function prototypes. yyy decides to have the code for only one function aaa and
not bbb. Now if we compile yyy we will get an error. Thus the only way to
remove the errors is by making bbb abstract and also the class abstract. Now if
anybody wants to extend from the class yyy, he has to write the code of bbb. So
make the following changes in ppp.java </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>ppp.java</p>

<p class=programs>import java.io.*;</p>

<p class=programs>public class ppp extends yyy</p>

<p class=programs>{</p>

<p class=programs>public void bbb()</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;hi&quot;);</p>

<p class=programs>} </p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Since bbb is abstract, you cannot call it directly.
Therefore bbb is overridden with our own function. Now compile it and you will
see no errors.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Similarly, for our previous program we have to override the
service function . The next program demonstrates the same. Two functions,
service and init are defined in class zzz.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.*;</p>

<p class=programs>public class zzz extends GenericServlet</p>

<p class=programs>{</p>

<p class=programs>public void service(ServletRequest req,ServletResponse res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Bye&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>System.out.println(&quot;service&quot;);</p>

<p class=programs>}</p>

<p class=programs>public void init(ServletConfig a)</p>

<p class=programs>{</p>

<p class=programs>System.out.println(&quot;init&quot;);</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Any servlet can be extended from GenericServlet. Even
HttpServlet is derived from GenericServlet. The service function in HttpServlet
checks for the method and accordingly calls doGet and DoPost. GenericServlet
makes writing servlets much easier. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>The following html file will create a simple form where the
method used is 'post'. So within the servlet, function doPost will be called. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>C:\Sun\AppServer\domains\domain1\docroot&gt;notepad a.html</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>a.html</p>

<p class=programs>&lt;html&gt;</p>

<p class=programs>&lt;form action=/servlet/zzz method=post&gt;</p>

<p class=programs>&lt;input type=submit value=&quot;Click...&quot;&gt;</p>

<p class=programs>&lt;/form&gt;</p>

<p class=programs>&lt;/html&gt;</p>

<p class=programs><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>zzz.java</p>

<p class=programs>package mservlet;</p>

<p class=programs>import java.io.*;</p>

<p class=programs>import javax.servlet.http.*;</p>

<p class=programs>public class zzz extends HttpServlet</p>

<p class=programs>{</p>

<p class=programs>public void doGet(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Get&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>}</p>

<p class=programs>public void doPost(HttpServletRequest req,HttpServletResponse
res)</p>

<p class=programs>{</p>

<p class=programs>try</p>

<p class=programs>{</p>

<p class=programs>res.setContentType(&quot;text/html&quot;);</p>

<p class=programs>PrintWriter out = res.getWriter();</p>

<p class=programs>out.println(&quot;&lt;b&gt;Post&quot;);</p>

<p class=programs>}</p>

<p class=programs>catch (Exception e){}</p>

<p class=programs>}</p>

<p class=programs>}</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>When you change the method to 'get', doGet will be called,
which will print get in the window.</p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=programs>http://127.0.0.1:8080/a.html </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>Remember, the html file must be in
C:\Sun\AppServer\domains\domain1\docroot&gt;. The only difference between 'get'
and 'post' is that in get, the query string is passed as a header value. So a
header called Query_String is created which contains all that we have keyed in.
If you say method=post then the data is sent separately. It is not a part of
the header. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>There is a finite amount of data that can be given to the
environmental variable, so if you're not going to be exceeding that, use 'get'.
When you want to send a large chunk of data, then use 'post'. </p>

<p class=cbasetext><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=cbasetext>You have seen how the Java servlet is both simple and
powerful. It allows us to extend the functionality of any web server with just
a few lines of code.</p>

</div>

</body>


<!-- Mirrored from www.vijaymukhi.com/documents/updatedbooks/j2ee/chap4.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 14:39:32 GMT -->
</html>
