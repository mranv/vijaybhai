<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.vijaymukhi.com/documents/books/aspnet1/chap6.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 13:44:33 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="chap6_files/filelist.html">
<link rel=Edit-Time-Data href="chap6_files/editdata.html">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>User Controls - ASP.NET - Beta2</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Vijay Mukhi</o:Author>
  <o:LastAuthor>Vijay Mukhi</o:LastAuthor>
  <o:Revision>13</o:Revision>
  <o:TotalTime>18</o:TotalTime>
  <o:Created>2001-09-26T11:53:00Z</o:Created>
  <o:LastSaved>2001-09-26T12:11:00Z</o:LastSaved>
  <o:Pages>41</o:Pages>
  <o:Words>10363</o:Words>
  <o:Characters>59070</o:Characters>
  <o:Company>V.M.C.I.</o:Company>
  <o:Lines>492</o:Lines>
  <o:Paragraphs>118</o:Paragraphs>
  <o:CharactersWithSpaces>72542</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 19 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Trebuchet MS";
	color:black;
	mso-font-kerning:0pt;
	font-weight:normal;}
p.Cprg, li.Cprg, div.Cprg
	{mso-style-name:"C\#prg";
	mso-style-parent:"C\#base";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:9.5pt;
	font-family:"Trebuchet MS";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.Coutput, li.Coutput, div.Coutput
	{mso-style-name:"C\#output";
	mso-style-parent:"C\#base";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:9.5pt;
	font-family:"Trebuchet MS";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.Cbullets, li.Cbullets, div.Cbullets
	{mso-style-name:"C\#bullets";
	mso-style-parent:"";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.3in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Bookman Old Style";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.Cbase, li.Cbase, div.Cbase
	{mso-style-name:"C\#base";
	mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Bookman Old Style";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal><img width=64 height=48 id="_x0000_i1025" src=bpb.jpg></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal align=center style='text-align:center'><b>-6-</b></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1>User Controls</h1>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In this chapter, you will learn a
little more about C#, so that you can incorporate it while writing your own
controls. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We will create our own controls
in a slightly different manner than what was done earlier. To do so, we create:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>a.aspx in c:\inetpub\wwwroot
subdirectory.<o:p></o:p></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>b.cs in c:\inetpub\wwwroot\bin
subdirectory.<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; Assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;s.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>You can compile the above file
named b.cs, by giving the following command:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput>&gt;csc /target:library<span style="mso-spacerun: yes"> 
</span>/out:c.dll b.cs /r:System.Web.dll<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The compiler creates a file
called c.dll in the inetpub\wwwroot\bin subdirectory. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the above C# program, we have
simply created a class zzz that is derived from the class Control. The class
Control belongs to the System.Web.UI namespace. We do not have any other code
in our program. Thus, we see a blank screen.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The file a.aspx will remain the
same for the initial programs.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;b&gt;hell&lt;/b&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We now have added a function
called Render that accepts a parameter 'o', which is an instance of the class
HtmlTextWriter, and its return type is void. The modifiers 'override' and
'protected', shall be explained to you, in a while. Also, we now call the Write
function in the class HtmlTextWriter, and give it a string,
&lt;b&gt;hell&lt;/b&gt;.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>When you load the aspx file, you
will see 'hell' displayed in bold on your screen. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>o is an instance of
HtmlTextWriter. Now that we have seen some output, let us understand the
working of the program.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file a.aspx, we have used
a directive called Register (which has been explained in one of the earlier
chapters), and created our own tag prefix called ttt. Along with these details,
we have also declared a namespace called nnn. Our custom tag starts with the
prefix ttt, followed by a colon and then the word zzz. By merely furnishing
this information, we see the word 'hell' displayed in the browser window. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>While executing the aspx file, when
the web server comes across a custom tag, it first looks for the directory that
is running the aspx file. On receiving the directory, it then looks into a
subdirectory to locate another subdirectory called bin. In our case, bin is
located in the c:\inetpub\wwwroot subdirectory. Thereafter, all the dlls in the
bin subdirectory, are loaded into memory. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Every dll that is loaded into
memory, contains information or metadata that consists of the classes and
namespaces existing in it. The web server will check every file for the
presence of a class named zzz (ttt: is followed by zzz) within the nnn
namespace (This namespace is given with the Register directive). The file c.dll
meets the match.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The Web server is programmed to
call a function by the name of Render, which takes an HtmlTextWriter object as
a parameter in the acquired dll. Using this object, text is rendered to the
browser.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, a user-defined tag is
nothing but a class with the same name, but which derives from the class
Control. Also, every user-defined tag must contain a function called Render. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Now, let us get back to C# and
understand what the word 'protected' signifies.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz {<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy a = new yyy();<o:p></o:p></p>

<p class=Cprg>a.abc();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy {<o:p></o:p></p>

<p class=Cprg>private void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>z.cs(6,1): error CS0122: 'yyy.abc()' is inaccessible due to
its protection level<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>If you compile the above code as <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput>&gt;csc z.cs<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>an error will be generated.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>This is because the function abc
is tagged with the modifier private. The private modifier allows only the
members of the same class to access the function. As a result, only members of
the class yyy are allowed to access the function abc. Therefore, the<span
style="mso-spacerun: yes">  </span>object 'a' of type yyy in the class zzz, is
restricted any access to private members of the class yyy. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, private is called an access
modifier, since it prohibits access to members of a class. Private is the most
restrictive access modifier, while public is the most tolerant. These access
modifiers do not apply to members of the same class.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>xxx a = new xxx();<o:p></o:p></p>

<p class=Cprg>a.abc();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class xxx : yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>protected void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>z.cs(6,1): error CS0122: 'xxx.abc()' is inaccessible due to
its protection level <o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The same error gets repeated
again with the protected modifier as a protected member is accessible only to a
derived class object.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Had any member of class yyy tried
to access the functions in class xxx, which has been derived from the class
yyy, no errors would have been generated. A protected modifier signifies that
only derived classes are allowed access its members. Thus, a protected modifier
lies in the midst of the two extremes, private and public. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>xxx a = new xxx();<o:p></o:p></p>

<p class=Cprg>yyy b = new yyy();<o:p></o:p></p>

<p class=Cprg>xxx c = new yyy();<o:p></o:p></p>

<p class=Cprg>yyy d = new xxx();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg>public class xxx <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>z.cs(7,9): error CS0029: Cannot implicitly convert type 'yyy'
to 'xxx'<o:p></o:p></p>

<p class=Coutput>z.cs(8,9): error CS0029: Cannot implicitly convert type 'xxx'
to 'yyy'<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>C# is extremely stern about
equating different data types to each other. Thus, we cannot equate a yyy
object with an xxx object. The entities on both sides of an 'equal to' sign
must have the same data type, or else an error stating 'cannot covert to', is
generated. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>xxx a = new xxx();<o:p></o:p></p>

<p class=Cprg>yyy b = new yyy();<o:p></o:p></p>

<p class=Cprg>xxx c = new yyy();<o:p></o:p></p>

<p class=Cprg>yyy d = new xxx();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class xxx : yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>z.cs(7,9): error CS0029: Cannot implicitly convert type 'yyy'
to 'xxx'<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Now, the error vanishes because,
class xxx is derived from class yyy. As a result, class xxx now comprises of
two classes, a yyy class and an xxx class. Therefore, the statement xxx c = new
yyy() does not raise any error. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>As class xxx derives from class yyy,
we call xxx a higher class, since it contains the lower class yyy, and more. We
can thus, have a higher class on the right hand side of the 'equal to' sign and
a lower class on the left hand side. Technically speaking, we can use a derived
class on the right hand side, and a base class on the left hand side of an
'equal to' sign. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>If they are placed the other way
around, that is, if the class yyy is on the right hand side and the xxx class
is on the left hand side, an error is generated. A derived class cannot be made
equal to a base class.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz {<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy a = new xxx();<o:p></o:p></p>

<p class=Cprg>a.abc();<o:p></o:p></p>

<p class=Cprg>a.pqr();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy {<o:p></o:p></p>

<p class=Cprg>public virtual void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;yyy abc&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public virtual void pqr()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;yyy pqr&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class xxx : yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public override void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;xxx abc&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public new void pqr()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;xxx pqr&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Coutput><u><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></u></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>xxx abc<o:p></o:p></p>

<p class=Coutput>yyy pqr<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We have two functions in class yyy
namely, abc and pqr. We have added a modifier named 'virtual' to these
functions. This modifier permits the derived classes to override the functions
abc and pqr. Without the word virtual, the derived classes cannot override
functions in the base class. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The derived class has the option
of overriding the functions of the base class, i.e. creating a new function
with the same names which may or may not bear any relation to the functions of
the base class.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Adding a modifier 'new' to the
virtual function in the derived class, breaks all links with the function
having the same name in the base class. Thus, the base class pointer has no
access to the derived class functions.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The override modifier overrides
the function of the base class. 'a'<span style="mso-spacerun: yes">  </span>is
a pointer to a yyy class and it is initialized to the derived class xxx. Hence,
when we call a.abc(), the function abc of the derived class xxx will be called.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, in the case of a virtual
function, C# goes a step further and checks the run time data type of the
object, and not the compile time data type. If the function in the derived
class has an override modifier, as in the case of the function abc, the function
gets called from the derived class. In case of new, as in the case of the
function pqr, it becomes a new function. And thus, it ignores the existence of
such a function in the class xxx. The only option available is to call the
function from the class yyy itself.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>There is a function called Render
in the class Control. If we want our function Render to be called in class zzz,
we have to use the override modifier. Otherwise, the function will be called
from the class Control instead.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy a = new xxx();<o:p></o:p></p>

<p class=Cprg>a.abc();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public virtual void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;yyy abc&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class xxx : yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>protected override void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;xxx abc&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>z.cs(18,25): error CS0507: 'xxx.abc()': cannot change access
modifiers when overriding 'public' inherited member 'yyy.abc()'<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We get the above error because,
when we override a function of the base class, we cannot change it's access
modifiers. Everything, including the modifiers, must be identical to what is
present in the base class.<span style="mso-spacerun: yes">  </span>Since the
function Render is marked as protected in the base class, we have to use the
same access modifier in the class zzz also.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Let us get back to Controls
again.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; Assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;S.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz aa=&quot;hi&quot; bb=100 runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public string s;<o:p></o:p></p>

<p class=Cprg>public string aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return s;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>s = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public int bb = 12;<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;hell &quot; + bb + &quot; &quot; + aa);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>hell 100 hi<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>A property can either consist of
a getset accessor or it can contain a simple instance variable. Also, it can be
used in place of a variable. In the case of a property, source code can be
executed. However, the user of the tag will never be exposed to the internal
workings of a property and its implementation in a tag. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The set accessor is called before
the function Render gets executed. This enforces the situation where all the
properties have to be initialized first, and only then the Render function can
be executed.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; Assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;S.aspx&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz aa-bb=&quot;hi&quot; aa-cc=100 runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public string bb = &quot;no&quot;;<o:p></o:p></p>

<p class=Cprg>public int cc = 200;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy a = new yyy();<o:p></o:p></p>

<p class=Cprg>public yyy aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return a;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(aa.bb + &quot; &quot; + aa.cc);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>hi 100<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We look at the .cs file first. In
the class zzz, we have created an object a, that is an instance of the class
yyy. This class is created in the same namespace nnn as given along with the
aspx Register directive. aa is a property that returns a yyy object in its get
accessor. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Class yyy also has two members
named bb and cc, which are initialized to 'no' and 200, respectively. Once a
yyy object is created, using the dot syntax, we can access these members
individually. In an aspx file, a minus sign is used instead of a dot, to access
the members. Hence, to access the bb member in yyy, we use the statement
'aa-bb'. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The only difference here is in
the choice of the separator, between the name of the property and the name of
the member, belonging to the object that the property returns.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Now, we return back to C#.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int [] a;<o:p></o:p></p>

<p class=Cprg>int i;<o:p></o:p></p>

<p class=Cprg>a = new int[3];<o:p></o:p></p>

<p class=Cprg>a[0] = 1;<o:p></o:p></p>

<p class=Cprg>a[2] = 8;<o:p></o:p></p>

<p class=Cprg>a[0]++;<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(a[0]);<o:p></o:p></p>

<p class=Cprg>i = 0;<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(a[i]);<o:p></o:p></p>

<p class=Cprg>i = 2;<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(a[i]);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>2<o:p></o:p></p>

<p class=Coutput>2<o:p></o:p></p>

<p class=Coutput>8<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Whenever we want to store
multiple items of the same type, we use a data type called an array. An array
stores similar items together. Here, 'a' is an array that is declared, using a
pair of square brackets []. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We now proceed to create an array
of ints. To do so, the keyword 'new' is used along with the size of the array,
which in our case is 3. The array size cannot be specified at the time of
creation of the array. It must be specified along with 'new'. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>To access the members of the
array, we use the name of the array, followed by a pair of square brackets
which enclose the index of the specific array variable. Thus, the first
variable is a[0], the second is a[1], and so on. The counting for the array
index begins with zero and not from 1. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>An array variable can be easily
used in place of a normal variable. The advantage in using arrays is that it
makes the code concise. For example, when we use the form a[i], i is an integer
variable holding values ranging from 0 to 2. When the value of i is 0, the name
of the variable becomes a[0]. When we change the value of i to 1, the name of
the variable now becomes a[1]. Thus, by changing the value of one variable, we
are able to change the name of another variable, and thus, access a different
value. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>It is this feature of arrays,
which makes them very useful. We are guilty of the crime of having used arrays
earlier in this book, without explaining them in detail.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int [] a;<o:p></o:p></p>

<p class=Cprg>int i;<o:p></o:p></p>

<p class=Cprg>a = new int[3];<o:p></o:p></p>

<p class=Cprg>for ( i = 0; i&lt;=2; i++)<o:p></o:p></p>

<p class=Cprg>a[i] = i*2;<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(a.Length);<o:p></o:p></p>

<p class=Cprg>for ( i = 0; i&lt; a.Length; i++)<o:p></o:p></p>

<p class=Cprg>System.Console.Write(a[i]);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>3<o:p></o:p></p>

<p class=Coutput>024<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Arrays are ideal in a looping
construct. In the first 'for' loop, we initialize the variable a[0] to 0, a[1]
to 2 and a[2] to 4. Every array type has a member called Length, that returns
the size of the array. In our case, the array size is 3. We can use this fact
to iterate through all the members of the array.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>string<span style="mso-spacerun: yes">  </span>[] a;<o:p></o:p></p>

<p class=Cprg>a = new string[]{&quot;hi&quot;,&quot;bye&quot;};<o:p></o:p></p>

<p class=Cprg>foreach ( string s<span style="mso-spacerun: yes">  </span>in a)<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(s);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>hi<o:p></o:p></p>

<p class=Coutput>bye<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We can create an array of any
data type. Earlier, we created an array of type int. In this program, we have
created an array of type string. We are also allowed to initialize the array
members at the time of creation, by using the square brackets.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We can use the 'foreach'
statement to iterate through the array. During each iteration, the string 's'
will sequentially hold the string values in the array. Thus, in the first
iteration, 's' will contain the string 'hi', and in the next iteration, it will
contain the string 'bye'. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The 'foreach' construct is a more
convenient way of iterating through an array, though we could even have used a
'for' construct. You are free to choose from any of these constructs, as per
your requirement.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy a = new yyy();<o:p></o:p></p>

<p class=Cprg>a[2] = &quot;hi&quot;;<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(a[2]);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public string a;<o:p></o:p></p>

<p class=Cprg>public string this[int i]<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;get &quot; + i);<o:p></o:p></p>

<p class=Cprg>return a;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;set &quot; + value + &quot; &quot;
+ i);<o:p></o:p></p>

<p class=Cprg>a = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>set hi 2<o:p></o:p></p>

<p class=Coutput>get 2<o:p></o:p></p>

<p class=Coutput>hi<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Although, we have not created any
array in the above program, we are still using the array syntax. We first
create an object 'a' of type yyy. Then we use the syntax a[2] = &quot;hi&quot;.
When the program reaches this statement, C# stops for a while and looks for an
indexer in our program. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>An indexer is a property with a
special name called 'this'. Since we have created such a property, C# calls the
set accessor of this property and assigns a value of 2 to the parameter i.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>As the return type of the
property is a string, the hidden variable named 'value' contains the string
'hi'. We are supposed to simulate an array within the property. Since this has
not been done, the indexer simulates an array that does not exist.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Let us get back to ASP+.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz runat=server&gt;<o:p></o:p></p>

<p class=Cprg>vijay mukhi<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if ( HasControls() )<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;True &lt;br&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>LiteralControl l = (LiteralControl) Controls[0];<o:p></o:p></p>

<p class=Cprg>o.Write(l.Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>True <o:p></o:p></p>

<p class=Coutput>vijay mukhi<o:p></o:p></p>

<p class=Coutput><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'>In the aspx file, we have inserted
the text 'vijay mukhi' within ttt, which is a newly created tag. We would like
to display this text in the browser. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>To do so, we call a function
called HasControls in the Render function, which does not take any parameter. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Since this function is not
present in our class zzz, it is taken from the Control class. The return value
of true or false depends upon the presence of controls in our web page. If the
page has controls, HasControls shows true, or else, it shows false.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The class Control has a property
called Controls that returns a ControlCollection object. This class has an
indexer that returns a Control object. Thus, the use of Controls[0] will return
the first control on our page.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In our program, Controls[0]
returns a LiteralControl, which is a class derived from Control. Hence, the
cast operator is required.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The Text property in this
control, displays the text given within the tag. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>vijay mukhi<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:Button id=&quot;bye&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/asp:Button&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int j = Controls.Count;<o:p></o:p></p>

<p class=Cprg>o.Write(j + &quot;&lt;br&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>for( int i = 0; i&lt; j; i++)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if ( Controls[i] is LiteralControl )<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>LiteralControl l = (LiteralControl) Controls[i];<o:p></o:p></p>

<p class=Cprg>o.Write(l.Text + &quot; &quot; + l.ClientID);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>1<o:p></o:p></p>

<p class=Coutput>vijay mukhi ctrl1<span style="mso-spacerun: yes">  </span><img
width=30 height=38 id="_x0000_i1026" src="chap6img/img1.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The class ControlCollection has a
member called Count, which contains a count of the number of Controls that are
present on our page. The value held in this member is 1, which indicates that
the Button control used outside the ttt tag, has not got added to our
collection. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>A 'for' loop is used to iterate
through the collection. A check is performed for a LiteralControl; thereafter,
two members of this control, Text and ClientID, are displayed. The member
ClientID shows crtl1, even though it has been assigned an id of 'hi'. These
controls are called child controls. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>Composite Controls<o:p></o:p></span></b></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>hi.aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:button text=&quot;Add&quot; OnClick=&quot;abc&quot;
runat=server/&gt;<span style="mso-spacerun: yes">  </span><o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return Int32.Parse(((TextBox)Controls[1]).Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>((TextBox)Controls[1]).Text = value.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(new LiteralControl(&quot;Vijay Mukhi: &quot;));<o:p></o:p></p>

<p class=Cprg>TextBox b = new TextBox();<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(b);<o:p></o:p></p>

<p class=Cprg>b.Text = Controls.Count.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>Vijay Mukhi:<span style="mso-spacerun: yes">   </span><img
width=119 height=34 id="_x0000_i1027" src="chap6img/img2.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>On loading the aspx file, we see
' 2' in the textbox and then, a button labeled Add is displayed. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the second program, we have
explained the function called Render, which is called when you have a User
Defined Control. In the same vein, if a function by the name of
CreateChildControl is present in the file, it too gets called. In this
function, we can add as many controls as we desire. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Every function in a class is
given an extra parameter called 'this'. This parameter refers to an instance of
the class that the function resides in. Thus, truly speaking, the function
Render is called with two parameters and not one. The code for it is as
follows:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg>Render ( zzz this, HtmlTextWriter o). <o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Therefore, this.Controls.Add or
Controls.Add means the same thing. Whenever you see this syntax, you can safely
ignore it. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the function
CreateChildControls, we have added a Literal Control object, and created a
Literal Control object on the same line. The syntax Add introduces one more
control to the Controls collection, and hence, we can proudly see 'Vijay Mukhi'
displayed in the browser window. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>To add a TextBox to the controls
collection, we simply create a TextBox object and use the same Add function
from the Controls class. Hence, the count 'property' shows the number 2 in the
editbox, because we have initialized the Text member to this value.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the class zzz, we have a
property called aa which is given the id of 'hi' in the aspx file. The property
can now be accessed by writing hi.aa. The syntax consists of the id name,
followed by name of the property. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Within this property, the value
contained in the TextBox is incremented by one, every time. The set accessor
uses value, which is the hidden variable, to change the Text member. In the get
accessor, we simply return the value stored in the Text member. The cast
operators are mandatory. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We also assume that the TextBox
is the second member of the Controls Collection and hence, we use Controls[1]
to access it. The user cannot be made aware of the fact that the controls were
created in the function CreateChildControls. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The HTML file simply shows it as
HTML tags. We are thus creating new controls by combining existing controls.
Such controls are called Composite controls, and the technique used is called
class composition. The User Controls created earlier, were present in a file
with the .ascx extension which is a text file, whereas now, we have placed the
control in an assembly or a dll file. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In every other sense, composite
controls are similar to User Controls and use the same ASP.NET syntax. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Zzz is derived from the interface
INamingContainer that does not contain any methods at all. We use it merely as
a tagging interface. When the class implements the above interface, every new
child control that is created, is given a unique id in ASP+. This concept is
important because we may have many instances of our control on the same page;
therefore, their ids need to be different. Zzz does not need to override the
Render method, because the child controls contain their own rendering logic or
code. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>You can also expose a single
property that internally uses multiple properties from multiple controls.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>But before that, let us first
learn all about events and delegates.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>delegate void ddd();<o:p></o:p></p>

<p class=Cprg>class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public void abc()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Console.WriteLine(&quot;abc &quot; );<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>zzz z = new zzz();<o:p></o:p></p>

<p class=Cprg>ddd a;<o:p></o:p></p>

<p class=Cprg>a = new ddd(z.abc);<o:p></o:p></p>

<p class=Cprg>a();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>abc<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The delegate ddd is created by
specifying the return type, the parameter types, and the reserved word
delegate. Thereafter, we are allowed to declare an object 'a', which is of the
delegate type ddd. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>To instantiate a delegate object,
'new' is used along with the name of the function, z.abc, which has to be
called through a delegate object named 'a'. Thus, a() will call the function
abc. This is an indirect way of calling the function abc through the delegate
object.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>delegate void ddd(string s);<o:p></o:p></p>

<p class=Cprg>class zzz {<o:p></o:p></p>

<p class=Cprg>public static void abc(string s)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Console.WriteLine(&quot;abc &quot; + s);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public static void pqr(string s)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Console.WriteLine(&quot;pqr &quot; + s);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public static void Main()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ddd a, b, c, d;<o:p></o:p></p>

<p class=Cprg>a = new ddd(abc);<o:p></o:p></p>

<p class=Cprg>b = new ddd(pqr);<o:p></o:p></p>

<p class=Cprg>c = a + b;<o:p></o:p></p>

<p class=Cprg>d = c - a;<o:p></o:p></p>

<p class=Cprg>a(&quot;one&quot;);<o:p></o:p></p>

<p class=Cprg>b(&quot;two&quot;);<o:p></o:p></p>

<p class=Cprg>c(&quot;three&quot;);<o:p></o:p></p>

<p class=Cprg>d(&quot;four&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>abc one<o:p></o:p></p>

<p class=Coutput>pqr two<o:p></o:p></p>

<p class=Coutput>abc three<o:p></o:p></p>

<p class=Coutput>pqr three<o:p></o:p></p>

<p class=Coutput>pqr four<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>This example shows us the
capabilities of a delegate. We have created two delegate objects, a and b, and
associated them with the functions abc and pqr, respectively. These functions
are called indirectly through the delegate objects. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The power of a delegate gets
displayed when we combine them, as in a + b . The result of this operation is
stored in delegate c. Thus, the syntax c() calls both the functions abc and
pqr. This is the first time that the plus sign is being used to call two
functions through a delegate. The same concept could be applied to call
numerous functions by using a single delegate. The delegate 'c' represents the
functions abc and pqr. Subtracting 'a' from 'c', i.e. subtracting the function
abc from the functions abc and pqr, results in the delegate 'd' calling only
the function pqr.<o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>Events</span></b><span style='color:windowtext'><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>public delegate void ddd();<o:p></o:p></p>

<p class=Cprg>class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy l = new yyy();<o:p></o:p></p>

<p class=Cprg>l.c += new ddd(l.abc);<o:p></o:p></p>

<p class=Cprg>xxx x = new xxx();<o:p></o:p></p>

<p class=Cprg>l.c += new ddd(x.xyz);<o:p></o:p></p>

<p class=Cprg>l.pqr();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public event ddd c;<o:p></o:p></p>

<p class=Cprg>public void pqr()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>c();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public void abc() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;abc&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class xxx <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public void xyz() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;xyz&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>abc<o:p></o:p></p>

<p class=Coutput>xyz<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The delegate ddd is created to
call the function abc. Next, we create two objects named 'l' and 'x', that look
like classes yyy and xxx, respectively. In the class yyy, we create 'c', which
is an instance of a delegate ddd. Note that the return type is replaced by the
word event. Hence, 'c' is now an event. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The event 'c' is initialized to a
delegate instance, which is associated with the function abc from the same
class. Thereafter, we again initialize the event c to a delegate instance, but
this time, we use a different function name i.e. xyz, from the class xxx. Thus,
the event 'c' is now associated with two functions. The command</span><span
style='font-family:"Trebuchet MS";color:windowtext'> l</span><span
style='color:windowtext'>.pqr() executes the event object as c(). Thus, two
functions belonging to two different classes get executed together. This is the
power of an event, and it is used extensively for notification purposes.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot;<span style="mso-spacerun: yes"> 
</span>assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control,INamingContainer<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return Int32.Parse(((TextBox)Controls[1]).Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>((TextBox)Controls[1]).Text = value.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(new LiteralControl(&quot;Vijay Mukhi: &quot;));<o:p></o:p></p>

<p class=Cprg>TextBox b = new TextBox();<o:p></o:p></p>

<p class=Cprg>b.Text = &quot;0&quot;;<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(b);<o:p></o:p></p>

<p class=Cprg>Button a = new Button();<o:p></o:p></p>

<p class=Cprg>a.Text = &quot;Add&quot;;<o:p></o:p></p>

<p class=Cprg>a.Click += new EventHandler(abc);<o:p></o:p></p>

<p class=Cprg>Controls.Add(a);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void abc(Object s, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output<o:p></o:p></u></p>

<p class=Coutput>Vijay Mukhi:<span style="mso-spacerun: yes">   </span><img
width=120 height=34 id="_x0000_i1030" src="chap6img/img3.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The above example demonstrates as
to how a delegate can be used in a control. In addition to the two controls
that existed previously, we have a third control, which is a button named 'b'.
The text or the label of the button is Add.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The syntax a.Click += new
EventHandler(abc) can only be used with a delegate. Click is a delegate type
property in the Button class, and is similar to our delegate objects a, b and
c. The EventHandler class is like our delegate ddd, which represents the
function abc. Thus, every time we click on the button, the function Click() is
called.<span style="mso-spacerun: yes">  </span>As a result, all the functions
associated with the delegate, get called. Thus, function abc is called, which increments
the value of aa by 1.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control,INamingContainer<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return Int32.Parse(((TextBox)Controls[1]).Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>((TextBox)Controls[1]).Text = value.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(new LiteralControl(&quot;Vijay Mukhi: &quot;));<o:p></o:p></p>

<p class=Cprg>TextBox b = new TextBox();<o:p></o:p></p>

<p class=Cprg>b.Text = &quot;0&quot;;<o:p></o:p></p>

<p class=Cprg>this.Controls.Add(b);<o:p></o:p></p>

<p class=Cprg>Button a = new Button();<o:p></o:p></p>

<p class=Cprg>a.Text = &quot;Add&quot;;<o:p></o:p></p>

<p class=Cprg>a.Click += new EventHandler(abc);<o:p></o:p></p>

<p class=Cprg>a.Click += new EventHandler(pqr);<o:p></o:p></p>

<p class=Cprg>Controls.Add(a);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void abc(Object s, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void pqr(Object s, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Each time we click on the button,
the number increases by 2. This is because we have associated the two functions
abc and pqr with the delegate object name Click. We could have called numerous
other functions in a similar manner. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The use of delegates offers a
cleaner method of calling our code whenever an event takes place. A composite
control can add itself to an event raised by a child control. We guarantee that
our code will get called with a click on a child control, i.e. a button.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>hi.aa++;<o:p></o:p></p>

<p class=Cprg>Response.Write(hi.aa.ToString());<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; Onchange=&quot;abc&quot;
runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public event EventHandler Change;<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return Int32.Parse(((TextBox)Controls[0]).Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>((TextBox)Controls[0]).Text = value.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>TextBox b = new TextBox();<o:p></o:p></p>

<p class=Cprg>b.Text = &quot;0&quot;;<o:p></o:p></p>

<p class=Cprg>Controls.Add(b);<o:p></o:p></p>

<p class=Cprg>Button a = new Button();<o:p></o:p></p>

<p class=Cprg>a.Text = &quot;Add&quot;;<o:p></o:p></p>

<p class=Cprg>a.Click += new EventHandler(add1);<o:p></o:p></p>

<p class=Cprg>Controls.Add(a);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void add1(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>Change(this,EventArgs.Empty);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>4 <o:p></o:p></p>

<p class=Coutput><img width=121 height=35 id="_x0000_i1031"
src="chap6img/img4.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>This example once again
demonstrates an event. Here, we have a tag with an id of 'hi'. Along with it, a
new property called onChange is introduced, which calls the function abc when a
change occurs in our user control. Thus, when anything is entered in the
textbox, it<span style="mso-spacerun: yes">  </span>will result in a call to
the function abc. This function merely increments the value of the property aa
by 1, and then displays it.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The user control notifies ASP+
about the change, as a result of which, the code that has been written outside
the control, gets called. The onChange property must be initialized to a
function, if we want it to discern any change in the control. The control will
simply trigger off an OnChange event, which results in a call to the function
abc. An event object named Change, which is of delegate type EventHandler, is
created. This happens because our property in the tag is named as OnChange. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>A property called aa is added,
which gets and sets the value in the textbox, i.e. Child control [0]. The
function CreateChildControls creates a textbox, just as it did before, and a
button with the label Add is also added. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The event object Click in the
button class is associated with the EventHandler delegate, which represents the
function named add1. The function add1 is executed when the button is clicked. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In this function, we merely add 1
to the property aa and then trigger off the Change event. This in turn, calls
the function abc, since it is associated with the OnChange property in the aspx
file. The program is not aware of this association, because these linkages are
given in the aspx file. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The function abc requires two
parameters, namely, a sender and an EventArgs data type. The sender in this
case is the program itself. Hence, the sender and the EventArgs are empty. The
statement aa++ increments the value by 1, and the Write function finally
displays this value. Note that aa has been incremented twice overall.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, it is evident that code can
be called in a dll, as well as, in the aspx file. This occurs with each having
no knowledge about the other's existence. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if ( hi.aa &lt; 0)<o:p></o:p></p>

<p class=Cprg>hi.aa=0;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; Ond=&quot;abc&quot;
runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><u><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></u></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public event EventHandler d;<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return Int32.Parse(((TextBox)Controls[0]).Text);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>((TextBox)Controls[0]).Text = value.ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected void ddd() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>d(this,EventArgs.Empty);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>TextBox b = new TextBox();<o:p></o:p></p>

<p class=Cprg>b.Text = &quot;0&quot;;<o:p></o:p></p>

<p class=Cprg>b.TextChanged += new EventHandler(ccc);<o:p></o:p></p>

<p class=Cprg>Controls.Add(b);<o:p></o:p></p>

<p class=Cprg>Button a = new Button();<o:p></o:p></p>

<p class=Cprg>a.Text = &quot;Add&quot;;<o:p></o:p></p>

<p class=Cprg>a.Click += new EventHandler(add1);<o:p></o:p></p>

<p class=Cprg>Controls.Add(a);<o:p></o:p></p>

<p class=Cprg>Button s = new Button();<o:p></o:p></p>

<p class=Cprg>s.Text = &quot;Minus&quot;;<o:p></o:p></p>

<p class=Cprg>s.Click += new EventHandler(sub1);<o:p></o:p></p>

<p class=Cprg>Controls.Add(s);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void ccc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ddd();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void add1(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>ddd();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void sub1(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa--;<o:p></o:p></p>

<p class=Cprg>ddd();<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">        </span><o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput><img width=165 height=34 id="_x0000_i1032"
src="chap6img/img5.bmp"><o:p></o:p></p>

<p class=Coutput><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'>In the aspx file, we have now
named the property as Ond, instead of OnChange, and it is assigned to the
function abc. This function simply checks whether the property aa holds a
negative number or not. If it does, then aa is set to zero. So, no matter how
many times we click on the button labeled Minus, the textbox value will remain
frozen at the value of 0. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The name of the event type has
been changed from Change to 'd'. Hence, the name of the property has also been
changed from OnChange to Ond. The textbox has an event called TextChanged, that
calls the function ccc whenever the contents of the textbox are changed. We
have also added an extra button labeled as Minus, which shall call the function
sub1.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The three event handler functions
finally call the function ddd. We also add or subtract the property aa by 1.
Thus, whenever we click on the button, the function ddd finally gets called.
Here, we carry out a single task i.e. call the event d(). This will result in a
call to the event function, which is associated with the event d or Ond, in the
aspx file. Thus, we can call the property by any name we want, provided, there
is an event of the same name. But, we should not start the name of the aspx tag
with the word 'On'. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We have encapsulated all the
event handling code in the function ddd, even though it is a single function
call. This is done to enable us to add a large amount of code associated with
the events, in future. The textbox event handling function is not required. It
comes into picture only when the user enters -100, directly into the textbox.
Since a change occurs on doing so, the function abc gets called, which reverts
the value back to zero.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>State Management<o:p></o:p></span></b></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot; %&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>hi.FSize++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; FSize=1 runat=server/&gt; <o:p></o:p></p>

<p class=Cprg>&lt;br&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:button Text=&quot;click&quot; OnClick=&quot;abc&quot;
runat=server/&gt; <o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public int FSize <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return (int) ViewState[&quot;FSize&quot;];<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ViewState[&quot;FSize&quot;] = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;font size=&quot; + FSize + &quot;&gt;&quot; +
&quot;Vijay Mukhi&quot;+ &quot;&lt;/font&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput>Vijay Mukhi <o:p></o:p></p>

<p class=Coutput><span style="mso-spacerun: yes"> </span><img width=47
height=37 id="_x0000_i1033" src="chap6img/img6.bmp"><o:p></o:p></p>

<p class=Coutput><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Vijay
Mukhi <o:p></o:p></span></b></p>

<p class=Coutput><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'><img
width=47 height=37 id="_x0000_i1034" src="chap6img/img6.bmp"></span></b><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><span style="mso-spacerun:
yes"> </span><o:p></o:p></span></p>

<p class=Cprg><u>View Source</u><o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form name=&quot;ctrl2&quot; method=&quot;POST&quot;
action=&quot;a.aspx&quot; id=&quot;ctrl2&quot;&gt;<o:p></o:p></p>

<p class=Cprg>&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot;
value=&quot;YTB6LTIwMTg1MDIyMjVfYTB6X2h6NXoyeF9hMHpfaHo1ejF4X2Ew<o:p></o:p></p>

<p class=Cprg>emh6RlNpXHplXzV6NXh4X194eF94eF94X194e447caf7&quot; /&gt;<o:p></o:p></p>

<p class=Cprg>&lt;font size=5&gt;Vijay Mukhi&lt;/font&gt; <o:p></o:p></p>

<p class=Cprg>&lt;br&gt;<o:p></o:p></p>

<p class=Cprg>&lt;input type=&quot;submit&quot; name=&quot;ctrl6&quot;
value=&quot;click&quot; /&gt; <o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The control zzz displays the text
'Vijay Mukhi'. It has a property called Fsize that controls the size of the
font that is displayed. A button labeled 'click' is displayed, which calls the
function abc, whenever it is clicked. The function abc increments the property
Fsiz,e by one. The final effect that is perceived is an increase in the font
size of the text 'Vijay Mukhi' displayed on the screen. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The Web Server keeps a record of
our actions, because the code of the function resides on the server and not on
the client. If you open a new browser window, you will observe that the two
Fsize properties are maintained independent of each other. This concept is
similar to the one we learnt earlier, when we were dealing with the shopping
cart.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The protocol used while
transferring the files is called HTTP or the Hyper Text Transfer Protocol. This
protocol is stateless, implying that, it does not maintain the history of the
interactions between the client and the server. Each interaction is an
independent action, with no information being stored about the earlier
proceedings. Since the protocol does not maintain any history, the web server
is provided with the facility for storing state information. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file b.cs, there is a user
control with the property Fsize and the overridden Render function. This
function calls the Write function, which simply outputs 'Vijay Mukhi' after
substituting the font size with the property value obtained from Fsize. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Normally, in a property, we store
the value that is contained in the hidden parameter called value in a variable.
But, in this case, we have used a different syntax, i.e.
State[&quot;FSize&quot;] = value;. This indicates that State is an indexer in
the Control class, which is passed a property called FSize as a string
parameter. It is now the Web Server's responsibility to store this value for
every instance of the browser. To retrieve the value, the same indexer called
State, is used with the property of FSize.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The View-Source menuoption
reveals a hidden field called __VIEWSTATE that has a different value for each
new copy of the browser. As this field is of type hidden, it does not get
displayed on the screen. However, its value is sent across to the web server.
The web server stores the value of the property Fsize, for every copy of the
browser. Thus, if there are 100 connections that are active, there will be 100
copies of Fsize, each storing different numbers in a double dimensional array.
This is how the information about the state is maintained between a server and
a browser, with the server doing all the grunt work.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The indexer called State is of
type System.Web.UI.StateBag, which is a data structure similar to a hash table.
This structure stores values and gives each of them a number or a hash value.
The hash value is used to access these values in a quick and efficient manner.
Thus, data in the State indexer is stored as 'FSize=10', or better still, in
the form of name-value pairs. The value of Fsize is not sent over. Instead, a
unique number representing the browser server connection is sent. The HTML file
created at the server, fills up the FSize property using this hash value. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>However, the use of Indexers,
such as State, entail a performance overhead. Hence, they should be used with
care, or else, the performance is bound to suffer.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot;<span style="mso-spacerun: yes"> 
</span>assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>hi.aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;br&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:button text=&quot;Vijay&quot; OnClick=&quot;abc&quot;
runat=server/&gt;<span style="mso-spacerun: yes">  </span><o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Collections.Specialized;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz: Control, IPostBackDataHandler <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int bb = 0;<o:p></o:p></p>

<p class=Cprg>String p1;<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return bb;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>bb = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public bool LoadPostData(String p, NameValueCollection v) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>p1 = p;<o:p></o:p></p>

<p class=Cprg>bb = Int32.Parse(v[UniqueID]);<o:p></o:p></p>

<p class=Cprg>return false;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public void RaisePostDataChangedEvent () <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;input name=&quot; + UniqueID + &quot; type=text
value=&quot; + aa + &quot;&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;br&gt;&quot; + p1);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We first add the option
/R:System.dll<span style="mso-spacerun: yes">  </span>to the compiler command
and run it as follows:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput>&gt;csc /target:library<span style="mso-spacerun: yes"> 
</span>/out:c.dll b.cs /r:System.Web.dll /r:System.dll<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput><img width=85 height=81 id="_x0000_i1035"
src="chap6img/img7.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the aspx file, we see a
textbox containing the value of 0 and a button labeled 'Vijay'. When we click
on the button, the value increases by 1. We also see the word 'hi' displayed
between the textbox and the button. Have we not performed something similar
earlier?<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We certainly have, but this time,
the control code is very different.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The control zzz is now derived
from an interface called IPostBackDataHandler, that has two functions named
LoadPostData and RaisePostDataChangedEvent. Since it is the interface that we
are deriving from, we have to include the code for these functions in our
class. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Zzz also contains a property
called aa that uses an int variable named bb, to store the value. In this
program, the State indexer is avoided completely. Instead, every time the data
is transferred to the server, or whenever we send the data on a round trip, the
function LoadPostData gets called. It has two parameters:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>a string p stating the id of the
contro, i.e 'hi' <o:p></o:p></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>a NameValueCollection object v,
which is an indexer that is used to access the property values. <o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, the variable p1 in this
function will contain the word 'hi'. UniqueId is a reserved word. It is the
name given to the control, which has an id of 'hi'. A variable named 'bb' is
used to hold values for the property. It will now contain this new value
returned by the indexer. This is how the stateful values of the properties are
maintained.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><span style="mso-spacerun:
yes"> </span><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Since the value of false is
returned, the next function named RaisePostDataChangedEvent does not get called.
Hence, there is no code present in it. If a value of true is returned, it
conveys a message to the system that we want to raise a changed notification.
This is known as implementing post back data. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>By deriving from the above
interface, we are informing ASP+ about our participation in post back data
handling. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot; %&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;hi&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Collections.Specialized;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI.WebControls;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class zzz : Control, IPostBackDataHandler,
IPostBackEventHandler<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int bb = 0;<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return bb;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>bb = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public bool LoadPostData(String p, NameValueCollection v) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>bb = Int32.Parse(v[this.UniqueID]);<o:p></o:p></p>

<p class=Cprg>return false;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public void RaisePostDataChangedEvent() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public void RaisePostBackEvent (String e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (e == &quot;Add&quot;) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa++;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>else <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>aa--;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;input name=&quot; + UniqueID + &quot; type=text
value=&quot; + aa + &quot;&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;input type=button value=Add
OnClick=\&quot;jscript:&quot;+ Page.GetPostBackEventReference(this,
&quot;Add&quot;)+ &quot;\&quot;&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>o.Write(&quot;&lt;input type=button value=Subtract
OnClick=\&quot;jscript:&quot;+ Page.GetPostBackEventReference(this,
&quot;Subtract&quot;)+ &quot;\&quot;&gt;&quot;);<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>View Source</u><o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form name=&quot;ctrl0&quot; method=&quot;POST&quot;
action=&quot;a.aspx&quot; id=&quot;ctrl0&quot;&gt;<o:p></o:p></p>

<p class=Cprg>&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot;
value=&quot;dDwtMTIyNDI1MzU1Njs7Pg==&quot; /&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg>&lt;input name=hi type=text value=2&gt;&lt;input type=button
value=Add OnClick=&quot;jscript:__doPostBack('hi','Add')&quot;&gt;&lt;input
type=button value=Subtract OnClick=&quot;jscript:__doPostBack('hi','Subtract')&quot;&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg>&lt;input type=&quot;hidden&quot; name=&quot;__EVENTTARGET&quot;
value=&quot;&quot; /&gt;<o:p></o:p></p>

<p class=Cprg>&lt;input type=&quot;hidden&quot;
name=&quot;__EVENTARGUMENT&quot; value=&quot;&quot; /&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;javascript&quot;&gt;<o:p></o:p></p>

<p class=Cprg>&lt;!--<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:1'>            </span>function
__doPostBack(eventTarget, eventArgument) {<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:2'>                        </span>var
theform = document.ctrl0;<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:2'>                        </span>theform.__EVENTTARGET.value
= eventTarget;<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:2'>                        </span>theform.__EVENTARGUMENT.value
= eventArgument;<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:2'>                        </span>theform.submit();<o:p></o:p></p>

<p class=Cprg><span style='mso-tab-count:1'>            </span>}<o:p></o:p></p>

<p class=Cprg>// --&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput><img width=198 height=41 id="_x0000_i1036"
src="chap6img/img8.bmp"><span style="mso-spacerun: yes"> </span><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We have a very simple aspx file
which only displays a user control named ttt:zzz. In the control code, we are
deriving from two interfaces this time, as against one, which was derived from,
in the previous program. The new interface called IPostBackEventHandler has
only one function named RaisePostBackEvent that enables a control to take
charge of an event fired by the control, in the aspx file. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The property aa and the post back
data handling code remain the same.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Each time we click on the
buttons, the code in the control gets called. The function RaisePostBackEvent
is called with a parameter, which signifies the value of the control. If we
click on the button labeled Add, the string parameter 'e' stores Add. As a
result, the property aa is increased by 1. The Subtract button does the
opposite, i.e. it decreases the value by 1. Earlier, on an event, code was
called in the aspx file. However in this case, code is called in our control.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the Render function, we have
created a textbox followed by two buttons. Each of these buttons has a label
and an attribute called OnClick, which is initialized to a JavaScript function
named GetPostBackEventReference. This function accepts two parameters, namely,
this and some text viz. Add or Subtract. The text that is supplied as a
parameter to this function, is further passed on as a parameter to the function
RaisePostBackEvent. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>You will not see any code for the
Javascript function in our control. Since it is prefaced with Page, the code is
generated in the HTML file created by the server.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The Render function in turn
creates the Javascript function called<span style="mso-spacerun: yes"> 
</span>__doPostBack in our HTML file. (You could verify it through
View-Source). Further, the function name given to the OnClick property in the
Render method, is changed. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, each time we click on the
button, the function __doPostBack is called with two parameters. The first
parameter is 'hi', while the second parameter is the string assigned in the
Render function. This function initializes the hidden form variables with the
values passed as parameters. And then, it calls the submit function, thereby,
transferring parameters out of the HTML file to the web server.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><span style="mso-spacerun:
yes"> </span><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>To summarise, in order to capture
post back events, such as, form submits from a client, the interface called
IPostBackEventHandler is implemented. Each time an event occurs on the client,
the RaisePostBackEvent method in the control, is called. Also, the ASP+ system
generates the client side Javascript, which incorporates customized event
handling, such that, any HTML element can initiate post back.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>Attributes<o:p></o:p></span></b></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Try out the following C# program
to understand, what attributes are all about.<o:p></o:p></span></p>

<p class=Cprg><span style='font-size:10.0pt;font-family:"Bookman Old Style"'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>z.cs</u><o:p></o:p></p>

<p class=Cprg>class zzz<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public static void Main() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy y = new yyy();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>[vijay(&quot;hi&quot;)]<o:p></o:p></p>

<p class=Cprg>public class yyy<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public yyy()<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;yyy const&quot;);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public class vijay : System.Attribute<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public vijay(string s)<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>System.Console.WriteLine(&quot;vijay const &quot; + s);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output </u><o:p></o:p></p>

<p class=Coutput>yyy const<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>An attribute is a class derived
from System.Attribute. It can be assigned any name that we like. Hence, we
chose the name 'vijay'. The parameters passed to the attribute 'vijay' are
simply passed on to the constructor. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We could discuss a large number
of concepts regarding attributes. Instead, we will make a simple statement
here, and that is &quot;C# likes attributes and it has a large number of
attributes&quot;.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; Assembly=&quot;c&quot; %&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script runat=server language=c#&gt;<o:p></o:p></p>

<p class=Cprg>void Page_Load() <o:p></o:p></p>

<p class=Cprg>{ DataBind();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">      </span>&lt;form
method=&quot;POST&quot; runat=&quot;server&quot;&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            </span>&lt;ttt:zzz
aa=&quot;Hello World!&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">          </span>&lt;br&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">          </span>&lt;ttt:zzz
aa=&quot;Hello World!&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">              </span>&lt;m&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">                </span>&lt;u&gt;
&lt;%# Container.aa %&gt;&lt;br&gt; &lt;/u&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">              </span>&lt;/m&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">        </span><span
style="mso-spacerun: yes">  </span>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">      </span>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">   </span>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">  </span><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyy: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<span style="mso-spacerun: yes">        </span>private
String<span style="mso-spacerun: yes">     </span>msg = null;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">        </span>public yyy(String
g) {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            </span>msg = g;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">        </span>}<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">        </span>public String aa {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           </span>get {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">                 </span>return
msg;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            </span>}<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           </span>set {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">                 </span>msg =
value;<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            </span>}<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">        </span>}<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">    </span>}<o:p></o:p></p>

<p class=Cprg>[ParseChildren(true)]<o:p></o:p></p>

<p class=Cprg>public class zzz : Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ITemplate mm = null;<span style="mso-spacerun: yes">      </span><o:p></o:p></p>

<p class=Cprg>String s = null;<span style="mso-spacerun: yes">   </span><o:p></o:p></p>

<p class=Cprg>public String aa<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get {<o:p></o:p></p>

<p class=Cprg>return s;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set {<o:p></o:p></p>

<p class=Cprg>s = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>[TemplateContainer(typeof(yyy))]<o:p></o:p></p>

<p class=Cprg>public ITemplate m<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get {<o:p></o:p></p>

<p class=Cprg>return mm;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set {<o:p></o:p></p>

<p class=Cprg>mm = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public override void DataBind() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           
</span>EnsureChildControls();<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           
</span>base.DataBind();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes"> </span>if (m != null) {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            
</span>Controls.Clear();<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">             </span>yyy i = new
yyy(aa);<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">            
</span>m.InstantiateIn(i);<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">             </span>Controls.Add(i);<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           </span>}<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           </span>else {<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">             
</span>Controls.Add(new LiteralControl(aa));<o:p></o:p></p>

<p class=Cprg><span style="mso-spacerun: yes">           </span>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>Hello World! <o:p></o:p></p>

<p class=Coutput><u>Hello World!</u><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Templates in controls help in
customizing the display of the output, as per our liking. First, we display our
user control without a template. The control has a property named aa, whose
value 'Hello World' is displayed by the control. Then, we use the same syntax,
but add the tags with the template name i.e. &lt;m&gt; and &lt;/m&gt;, to
customize this display. The template is given the name 'm', thereby, indicating
that we can have many more templates in the file. In this tag, we use the html
tags as they are, at the same time, place C# code, but within the &lt;%#
symbol. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>A container is an object
available in ASP.Net that enables access to the properties of a control. Thus,
Container.aa will result in display of the text &quot;Hello World&quot;. As the
code is placed within the HTML underline tag u, the property value is displayed
as underlined. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file b.cs, zzz has a
property named aa. The variable 's' stores the current value of this property.
It also contains an instance variable mm of type ITemplate. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The template 'm' in the a.aspx
file, is translated into a property 'm' of type ITemplate. The mm object stores
the value of this property. Notice that an attribute Template has been added to
this property. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>An attribute is placed within
square brackets[]. Thus, Template is an attribute that accepts one parameter,
which is the name of the class that the code resides in. The attribute too is
stored in the dll as part of the metadata. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Thus, to create a template, we
simply need a property of type ITemplate along with the Template attribute. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the function
CreateChildControls, the control is checked for the existence of a template. If
the property 'm' is null, no template is<span style="mso-spacerun: yes"> 
</span>created in the control. However, if it is not null, a template is
created. In situations where templates are not implemented, a Literal Control
is added. It contains the value of property aa as its text. But, for a control
containing a template, the InstatiateIn function is called with a variable i. i
is an object that looks like yyy. No further coding is required to handle
templates. The user is provided with utmost flexibility, so that he can
accomplish what he desires, in this regard.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Templates separate the user or
presentation logic from the control or business logic. Therefore, each user can
decide on how properties of the control are to be laid out.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>Control Parsing<o:p></o:p></span></b></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot; %&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz aa=&quot;2&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:yyy m=&quot;a1&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:yyy m=&quot;a2&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:yyy m=&quot;a3&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:yyy m=&quot;a4&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt; <o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<span style="mso-spacerun: yes">  </span><o:p></o:p></p>

<p class=Cprg><u><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></u></p>

<p class=Cprg><u>b1.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<span style='mso-tab-count:1'>    </span><o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyy: Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>String mm;<o:p></o:p></p>

<p class=Cprg>public String m<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return mm;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>mm = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn {<o:p></o:p></p>

<p class=Cprg>public class zzz: Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ArrayList i = new ArrayList();<o:p></o:p></p>

<p class=Cprg>int bb=0;<o:p></o:p></p>

<p class=Cprg>public int aa<o:p></o:p></p>

<p class=Cprg>{ <o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return bb;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>bb = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void AddParsedSubObject(Object obj) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (obj is yyy) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>i.Add(obj);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (aa &lt; i.Count) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write( ((yyy) i[aa]).m);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput>&gt;csc /target:library /out:c.dll b.cs b1.cs
/r:system.web.dll /r:system.dll<o:p></o:p></p>

<p class=Coutput><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>a3<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We have a total of three files.
In the apsx file, there are two user controls. Both the controls are derived
from Control and placed in two different files, but they are finally compiled
into one dll. The first control called zzz is in the file b.cs. It contains one
property called aa. The second user control called yyy has a property called m,
and is situated in the file b1.cs. We have incorporated many instances of the second
user control yyy, within the first user control. Since the property aa has a
value of 2, the output is a3, which is the value contained in the property 'm'
of the third instance of the user control. A point to be noted here is that the
numbering for controls too start from 0.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><span style="mso-spacerun:
yes"> </span><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Now, let us move on to the
internals. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The class yyy has one property
called 'm', that stores the string in the variable 'mm'. Further, no Render
method is present. The class yyy represents the most basic and simplest
control.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>All the action takes place in the
file b.cs. The control zzz diverts from the customary manner in which ASP.NET
parses the controls. It calls code within itself to execute customized parsing.
<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The instance 'i' of ArrayList is
created to store multiple values. It has a function called Add, that simply
keeps track of each value. It also has an indexer to retrieve these values.
There is nothing to write home about the property aa.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Every time ASP.Net comes across a
user control, it calls the function AddParsedSubObject from the class Control.
This function is given a parameter that represents the control to be added. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>An important point to be noted is
that, &quot;All classes in the .Net world are derived from Object&quot;. Here,
we check the run time data type of the parameter obj. If it is of type yyy, it
is added to the ArrayList, using its Add function. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>If we do not override the
function AddParsedSubObject, the default behavior of this function will get
added to every control, thereby, making it a child control. We want to prevent
this from happening, since we are interested in adding a control of class yyy,
only to the ArrayList. We are now in a position to decide as to what should
ensue for each control. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Finally, the Render function gets
called. Here, we simply use the value of the property aa to index into the
ArrayList object i. Then, using the cast of yyy, we retrieve the value stored
in the property m of the selected yyy object. Since array handling is done
internally, an ArrayList makes it easier for us to handle multiple values. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>If we have a control within a
control, the page parser will add the inner control to the outer Controls
Collection property. This is accomplished by calling the function
AddParsedSubObject, which inserts the child control into the control hierarchy
tree. We can override this behavior with whatever we feel is right.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz Si=&quot;3&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ct m=&quot;a1&quot;/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ct m=&quot;a2&quot;/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ct m=&quot;a3&quot;/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ct m=&quot;a4&quot;/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b1.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn {<o:p></o:p></p>

<p class=Cprg>public class yyy : Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>String mm;<o:p></o:p></p>

<p class=Cprg>public String m<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return mm;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>mm = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class ccc: ControlBuilder <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public override Type GetChildControlType(String t, IDictionary a)
<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (String.Compare(t, &quot;ct&quot;, true) == 0) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return typeof(nnn.yyy);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>return null;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>[ControlBuilderAttribute(typeof(ccc))]<o:p></o:p></p>

<p class=Cprg>public class zzz: Control <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ArrayList i = new ArrayList();<o:p></o:p></p>

<p class=Cprg>int s = 0;<o:p></o:p></p>

<p class=Cprg>public int si<o:p></o:p></p>

<p class=Cprg>{ <o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return s;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>s = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void AddParsedSubObject (Object obj) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (obj is yyy) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>i.Add(obj);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void Render(HtmlTextWriter o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (si &lt; i.Count) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>o.Write( ((yyy) i[si]).m );<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>a4<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The aspx file, prima facie
appears to be identical to the earlier one. It has a tag zzz, which contains
four instances of another tag called 'ct' nested within it. As the property Si
has a value of 3, a4 is displayed. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The file b1.cs remains the same
as before. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the class zzz, we also have a
property named 'si', in conjunction with an ArrayList object 'i'. Only the name
and the datatype of the property have been changed, whereas, the code remains
the same.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The function AddParsedSubObject
also remains the same. The Render function has an additional error check, which
is to ensure that the value of the property 'si' does not exceed the number of
items in the ArrayList object. This value is stored in a property called Count.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The most important change brought
about in the Control class zzz is, the introduction of an attribute called
ControlBuilderAttribute, to which one parameter is passed. This parameter is
the return value of typeof, on an instance of the class ccc. The class ccc is
derived from the class ControlBuilder. As the attribute is set on our control
class, functions from this class will be called, to decide as to how a control
is to be added to the list of controls. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>There is a default implementation
of the Control Builder called GetChildControlType. It returns either the type
of control or a null, depending upon whether the control is to be added or not,
respectively. As we have overridden this function, the logic incorporated by us
in this function, decides the controls that are deemed necessary to be added. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The first string parameter passed
to GetChildControlType, is the name of the control type. The 'if' statement,
compares this string variable with ct. If it results in true, the typeof class
yyy is returned. Otherwise, null is returned.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><b><span style='font-size:14.0pt;font-family:"Times New Roman";
color:windowtext'>Databound Templated Controls<o:p></o:p></span></b></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot; %&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>public void Page_Load(Object sender, EventArgs e1) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (!IsPostBack) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ArrayList v = new ArrayList();<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;10&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;200&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;31&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;423&quot;);<o:p></o:p></p>

<p class=Cprg>l.DataSource = v;<o:p></o:p></p>

<p class=Cprg>l.DataBind();<o:p></o:p></p>

<p class=Cprg>IEnumerator e = l.DataSource.GetEnumerator();<o:p></o:p></p>

<p class=Cprg>while(e.MoveNext()) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Response.Write(e.Current.ToString());<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;l&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;m&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:textbox id=&quot;hi&quot; Text=&quot;&lt;%#
Container.DataItem %&gt;&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;br&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/m&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:button Text=&quot;nothing&quot; OnClick=&quot;abc&quot;
runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><!--[if supportFields]><span style='font-size:10.0pt;mso-bidi-font-size:
9.5pt'><span style='mso-element:field-begin'></span>xe &quot;b1.cs&quot;</span><![endif]--><!--[if supportFields]><span
style='font-size:10.0pt;mso-bidi-font-size:9.5pt'><span style='mso-element:
field-end'></span></span><![endif]--><u>b1.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyy: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int i;<o:p></o:p></p>

<p class=Cprg>object d;<o:p></o:p></p>

<p class=Cprg>public yyy(int it, object da) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>i = it;<o:p></o:p></p>

<p class=Cprg>d = da;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public object DataItem <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return d;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public int ItemIndex <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return i;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>[ParseChildren(true)]<o:p></o:p></p>

<p class=Cprg>public class zzz : Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>private ITemplate<span style="mso-spacerun: yes">  
</span>mm<span style="mso-spacerun: yes">   </span>= null;<span
style="mso-spacerun: yes">      </span><o:p></o:p></p>

<p class=Cprg>private ICollection d = null;<span style="mso-spacerun: yes"> 
</span><o:p></o:p></p>

<p class=Cprg>public ICollection DataSource <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return d;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>d = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>[TemplateContainer(typeof(yyy))]<o:p></o:p></p>

<p class=Cprg>public ITemplate m<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return mm;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>mm = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void AddParsedSubObject(object o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void OnDataBinding(EventArgs e1) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (DataSource != null) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Controls.Clear();<o:p></o:p></p>

<p class=Cprg>ClearChildViewState();<o:p></o:p></p>

<p class=Cprg>IEnumerator e = DataSource.GetEnumerator();<o:p></o:p></p>

<p class=Cprg>int i = 0;<o:p></o:p></p>

<p class=Cprg>while(e.MoveNext()) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy i1 = new yyy(i, e.Current);<o:p></o:p></p>

<p class=Cprg>m.InstantiateIn(i1);<o:p></o:p></p>

<p class=Cprg>Controls.Add(i1);<o:p></o:p></p>

<p class=Cprg>i++;<span style="mso-spacerun: yes">         </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>ChildControlsCreated = true;<o:p></o:p></p>

<p class=Cprg>ViewState[&quot;ggg&quot;] = i;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls () <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>object o = ViewState[&quot;ggg&quot;];<o:p></o:p></p>

<p class=Cprg>if (o != null) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Controls.Clear();<o:p></o:p></p>

<p class=Cprg>int numItems = (int)o;<o:p></o:p></p>

<p class=Cprg>for (int i=0; i &lt; numItems; i++) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy i1 = new yyy(i, null);<o:p></o:p></p>

<p class=Cprg>m.InstantiateIn(i1);<o:p></o:p></p>

<p class=Cprg>Controls.Add(i1);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>} } }<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Coutput>1020031423 </p>

<p class=Coutput><img width=85 height=133 id="_x0000_i1037"
src="chap6img/img9.bmp"><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Although, the above program is
considerable in size, it has no worthwhile achievement to offer. Let us start
with the aspx program, like we always do. There is a user control named zzz,
which has an id of</span><span style='font-family:"Trebuchet MS";color:windowtext'>
l,</span><span style='color:windowtext'> since we want to replicate a DataList
or DataGrid type of user control. We want you to go through the experience of
writing such controls. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>We also have a template called
'm' inside our control, that encompasses a textbox with the id 'hi'. The most
important point here is that the text property is equated to the DataItem
property of the control. This DataItem property belongs to the class yyy and
not to the class zzz. We also have a button named nothing. This button calls a
function named abc. This function sends the page back to the server.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the Page_Load function, an
ArrayList object named 'v' is created and initialized to 4 arbitrary numbers.
The next line has </span><span style='font-family:"Trebuchet MS";color:windowtext'>l</span><span
style='color:windowtext'>.DataSource, which implies that we are referring to a
property called DataSource, that exists in the class zzz. We consciously named
it as DataSource, because the DataList Control refers to it by the same name.
Then, we bind our user control by calling the DataBind function. This calls the
OnDataBinding function in the class zzz. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The DataSource property is of
type ICollection that iterates through any collection or list. The ICollection
interface has a member function called GetEnumerator that returns an
IEnumerator, which is stored in the object 'e'. This object 'e' in turn, calls
a function MoveNext. The function MoveNext either returns true, (if there are
any more items in the collection), or returns false, (if there are no more
items in the collection). This active item is stored in a member called
Current. It removes all the previous members. Thus, the loop iterates 4 times
because we have 4 members in the list.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file b1.cs, we are once
again deriving class yyy from Control. We have two properties:<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>DataItem, which is an object that
gives it the flexibility to store anything.<o:p></o:p></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>ItemIndex, which is an int. <o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>There are no further complications.
<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The main source code resides in
the class zzz. Note that the class has an attribute [ParseChildren(true)]. The
attribute ensures the availability of code in other classes, hence no error is
reported<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The class has a property called
DataSource, which is of type ICollection. It simply assigns the value contained
in 'value' to the object 'd'. Since we are using templates, the template value
is stored in mm, which is an instance of ITemplate. The yyy class is passed as
a parameter, to the template attribute.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The function AddParsedSubObject
is added to override the default, i.e., to avoid the default implementation
from adding the control. Our function does not contain any code. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The function OnDataBinding first
looks for a value in the property DataSource. In case some value is present,
all the controls and the View state get cleared first. Thereafter, the earlier
code of the function abc is executed to loop, through the members of the data
list passed in the DataSource. For the time being, we do not need to concern
ourselves with the type of data that the DataSource represents. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>As we come across each member of
the data source, we create a new yyy object, and give the constructor two
values:<o:p></o:p></span></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>a simple number i, that increases by
1, each time.<o:p></o:p></p>

<p class=Cbullets><span style='mso-bidi-font-size:12.0pt;font-family:"Times New Roman"'>•<span
style='mso-tab-count:1'>     </span></span>the value of the list item. <o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Then, the Initialized member of
the template is called with this newly created yyy object. Finally, we call Add
of the control. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Once the loop exits, ASP.Net is
signalled about the work completion on the child controls, by setting the
property ChildControlsCreated to true. Finally, we restore the value held in
the variable i in the state variable ggg, since it stores the number of items
in the array.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>As usual, the last function to
get called is CreateChildControls. In this function, using the state variable
ggg, a count of the controls displayed on the screen, is obtained. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg>&lt;input name=&quot;l:ctrl0:hi&quot; type=&quot;text&quot;
value=&quot;12&quot; id=&quot;l_ctrl0_hi&quot; /&gt;<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'>The input box created by the
template looks like the one shown above in View-Source.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cprg><u>a.aspx</u><o:p></o:p></p>

<p class=Cprg>&lt;%@ Register TagPrefix=&quot;ttt&quot;
Namespace=&quot;nnn&quot; assembly=&quot;c&quot;%&gt;<o:p></o:p></p>

<p class=Cprg>&lt;html&gt;<o:p></o:p></p>

<p class=Cprg>&lt;script language=&quot;C#&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>public void Page_Load(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (!IsPostBack) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ArrayList v = new ArrayList();<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;1&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;2&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;3&quot;);<o:p></o:p></p>

<p class=Cprg>v.Add(&quot;4&quot;);<o:p></o:p></p>

<p class=Cprg>l.ds = v;<o:p></o:p></p>

<p class=Cprg>l.DataBind();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>void abc(Object sender, EventArgs e) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>for (int x=0; x&lt;l.Items.Count; x++) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>TextBox t1 = (TextBox) l.Items[x].FindControl(&quot;t&quot;);<o:p></o:p></p>

<p class=Cprg>t1.Text = (Int32.Parse(t1.Text) + 1).ToString();<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>&lt;/script&gt;<o:p></o:p></p>

<p class=Cprg>&lt;body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;form method=&quot;POST&quot; action=&quot;a.aspx&quot;
runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;ttt:zzz id=&quot;l&quot; runat=server&gt;<o:p></o:p></p>

<p class=Cprg>&lt;m&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:textbox id=&quot;t&quot; Text=&quot;&lt;%#
Container.DataItem%&gt;&quot; runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/m&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/ttt:zzz&gt;<o:p></o:p></p>

<p class=Cprg>&lt;asp:button Text=&quot;Update&quot; OnClick=&quot;abc&quot;
runat=server/&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/form&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/body&gt;<o:p></o:p></p>

<p class=Cprg>&lt;/html&gt;<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>[ParseChildren(true)]<o:p></o:p></p>

<p class=Cprg>public class zzz: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ITemplate mm = null;<span style="mso-spacerun: yes">      </span><o:p></o:p></p>

<p class=Cprg>ICollection ds1 = null;<span style="mso-spacerun: yes">  </span><o:p></o:p></p>

<p class=Cprg>yyyc r = null;<o:p></o:p></p>

<p class=Cprg>public ICollection ds<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return ds1;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ds1 = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>[TemplateContainer(typeof(yyy))]<o:p></o:p></p>

<p class=Cprg>public ITemplate m<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return mm;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>set <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>mm = value;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public yyyc Items <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return r;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void AddParsedSubObject(object o) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void CreateChildControls() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>object o = ViewState[&quot;ggg&quot;];<o:p></o:p></p>

<p class=Cprg>if (o != null) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Controls.Clear();<o:p></o:p></p>

<p class=Cprg>ArrayList it = new ArrayList();<o:p></o:p></p>

<p class=Cprg>int n = (int)o;<o:p></o:p></p>

<p class=Cprg>for (int i=0; i &lt; n; i++) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy e = new yyy(i, null);<o:p></o:p></p>

<p class=Cprg>m.InstantiateIn(e);<o:p></o:p></p>

<p class=Cprg>Controls.Add(e);<o:p></o:p></p>

<p class=Cprg>it.Add(e);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>r = new yyyc(it);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>protected override void OnDataBinding(EventArgs e1) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>if (ds != null) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>Controls.Clear();<o:p></o:p></p>

<p class=Cprg>ClearChildViewState();<o:p></o:p></p>

<p class=Cprg>ArrayList it = new ArrayList();<o:p></o:p></p>

<p class=Cprg>IEnumerator dataEnum = ds.GetEnumerator();<o:p></o:p></p>

<p class=Cprg>int i = 0;<o:p></o:p></p>

<p class=Cprg>while(dataEnum.MoveNext()) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>yyy e = new yyy(i, dataEnum.Current);<o:p></o:p></p>

<p class=Cprg>m.InstantiateIn(e);<o:p></o:p></p>

<p class=Cprg>Controls.Add(e);<o:p></o:p></p>

<p class=Cprg>it.Add(e);<o:p></o:p></p>

<p class=Cprg>i++;<span style="mso-spacerun: yes">         </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>r = new yyyc(it);<o:p></o:p></p>

<p class=Cprg>ChildControlsCreated = true;<o:p></o:p></p>

<p class=Cprg>ViewState[&quot;ggg&quot;] = i;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<span style="mso-spacerun: yes">    </span><o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b1.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyy: Control, INamingContainer <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>int i;<o:p></o:p></p>

<p class=Cprg>object d;<o:p></o:p></p>

<p class=Cprg>public yyy (int it,object da) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>i = it;<o:p></o:p></p>

<p class=Cprg>d = da;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public object DataItem <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return d;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public int ItemIndex <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return i;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Cprg><u>b2.cs</u><o:p></o:p></p>

<p class=Cprg>using System;<o:p></o:p></p>

<p class=Cprg>using System.Collections;<o:p></o:p></p>

<p class=Cprg>using System.Web;<o:p></o:p></p>

<p class=Cprg>using System.Web.UI;<o:p></o:p></p>

<p class=Cprg>using System.Web.Util;<o:p></o:p></p>

<p class=Cprg>namespace nnn<o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>public class yyyc<span style="mso-spacerun: yes">  </span>:
ICollection <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>ArrayList i;<o:p></o:p></p>

<p class=Cprg>public yyyc (ArrayList it) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>i = it;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public int Count <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return i.Count;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public bool IsReadOnly <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return false;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public bool IsSynchronized <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return false;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public object SyncRoot <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return this;<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public yyy this[int ind] <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>get <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return (yyy)i[ind];<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public void CopyTo(Array array, int index) <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>for (IEnumerator e = this.GetEnumerator(); e.MoveNext();)<o:p></o:p></p>

<p class=Cprg>array.SetValue(e.Current, index++);<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>public IEnumerator GetEnumerator() <o:p></o:p></p>

<p class=Cprg>{<o:p></o:p></p>

<p class=Cprg>return i.GetEnumerator(); <o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cprg>}<o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Coutput><u>Output</u><o:p></o:p></p>

<p class=Cbase><span style='color:windowtext'><span style="mso-spacerun:
yes">     </span><img width=380 height=37 id="_x0000_i1038"
src="chap6img/img10.bmp"><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The file b2.cs is added to the
list of filenames during compilation. This example displays four textboxes like
the last example, but they are in a horizontal form. When we click on the
button labelled 'Update', the numbers within each of these textboxes, increase
by one. In the<span style="mso-spacerun: yes">  </span>last program, when we
clicked on the numbers, nothing happened. In this program, we are walking
through the data in each textbox, at posting. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Now, we will only explain the
variations between the current program and the previous one. Hence, we advise
you to revise the earlier explanation.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>When we click on the button, the
function abc gets called as usual. b.cs holds the zzz user control, having an
id of </span><span style='font-family:"Trebuchet MS";color:windowtext'>l </span><span
style='color:windowtext'>in the file a.aspx file. This class contains a
property called Items. This property in turn, has a member called Count that
gives a count of the number of items in our collection. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The 'for' loop is repeated 4
times, since we have four items in our collection. The Items property is of
type yyyc, which is located in b2.cs. The class yyyc implements functions from
ICollection. It also contains an indexer that returns a yyy or Control object. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>Using the indexer, we have called
the function FindControl with the id of the textbox 't'. This function returns
a textbox object that is stored in t1. We then added-on to the existing value
of the textbox, and redisplayed it using the text property.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The class yyy in b1.cs remains
the same as before. Here, the constructor simply initializes the variables i
and d to 'it' and 'da', respectively. These variables are used to dispatch the
values in the property DataItem and ItemIndexes.<o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file b.cs, which contains
the zzz class and the attribute of ParseChildren as true, we have changed the
DataSource name to 'ds'. This is done, basically to demonstrate to you, that
you can choose whichever names you fancy. The template 't' remains unaltered.
As mentioned earlier, we have introduced a new property called 'Items' that is
of type class yyyc, found in the file b2.cs. This property simply returns the
value of 'r', which is also of type yyyc. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In function CreateChildControls,
we simply populate our array list object as before. It is now given as a
parameter to the constructor for the newly created yyyc object. The return
value is stored in 'r'. Thus, r now has a reference for the items in the list. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The Items property is 'readonly'.
Hence, it can only return values. Here, it returns a yyyc object. The function
OnDataBinding initializes the variable 'r' and then executes the same code as
before. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>In the file b2.cs, yyy is derived
from the interface ICollection, which has a large number of properties and
functions. Though, they are not always called, yyy still has to contain the
code. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The ArrayList object i is
initialized to the value passed to the constructor. It stands for the items in
the list. The Count property in the aspx file returns the Count member of the
ArrayList class. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'>The indexer uses the int ind
parameter to index into the ArrayList's indexer, and to fetch the value. This
value is cast to a yyy type. The other functions are not relevant at the
moment. <o:p></o:p></span></p>

<p class=Cbase><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Cbase>Thus, we are able to receive each of the values in the textbox,
and change them one at a time. The DataList and DataGrid controls, work on
similar lines. By now, you must have realized that all the free controls have
been written in the same manner. Further, by the time you receive a copy of
this book, there will be over a trillion such controls that you would be able
to buy, thus, making server side programming a real joy.</p>

</div>

</body>


<!-- Mirrored from www.vijaymukhi.com/documents/books/aspnet1/chap6.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 13:44:53 GMT -->
</html>
