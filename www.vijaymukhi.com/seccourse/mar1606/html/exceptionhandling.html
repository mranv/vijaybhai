<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.vijaymukhi.com/seccourse/mar1606/html/exceptionhandling.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 14:42:40 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="exceptionhandling_files/filelist.html">
<title>Exception handling</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Vijay Mukhi</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Sonal Mukhi</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>75</o:TotalTime>
  <o:Created>2006-03-17T10:06:00Z</o:Created>
  <o:LastSaved>2006-03-17T10:06:00Z</o:LastSaved>
  <o:Pages>7</o:Pages>
  <o:Words>1141</o:Words>
  <o:Characters>6507</o:Characters>
  <o:Company>VMCI</o:Company>
  <o:Lines>54</o:Lines>
  <o:Paragraphs>13</o:Paragraphs>
  <o:CharactersWithSpaces>7991</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal>Exception handling</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>using System;</p>

<p class=MsoNormal>public class zzz</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>public static void Main()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>yyy a = new yyy();</p>

<p class=MsoNormal>a.abc();</p>

<p class=MsoNormal>Console.WriteLine(&quot;After abc&quot;);</p>

<p class=MsoNormal>Console.WriteLine(&quot;At end&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>class yyy</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>public void abc()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;Start abc&quot;);</p>

<p class=MsoNormal>Console.WriteLine(&quot;End abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>End abc</p>

<p class=MsoNormal>After abc</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>A simple program, we create a instance of the class yyy and
call the function abc from it. All the WriteLine functions get called in the
order we expected them to. We now add a single line of code to the abc
function.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public void abc()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;Start abc&quot;);</p>

<p class=MsoNormal>throw new Exception();</p>

<p class=MsoNormal>Console.WriteLine(&quot;End abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>Unhandled Exception: System.Exception: Exception of type
'System.Exception' was</p>

<p class=MsoNormal>thrown.</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Now only one WriteLine the first one gets called. The
keyword throw throws an exception which is another way of say something
unexpected happened. This could be an error or some thing very benign. The
throw requires the name of a class which in our case is Exception. It is the
throw keyword that shows the message box telling us that something wrong
happened. In our case our program quits out. We change one line again as</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>throw new Exception(&quot;Vijay Mukhi&quot;);</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>Unhandled Exception: System.Exception: Vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Whatever we specify in the constructor to the Exception
class is displayed as a helpful message to tell us what went wrong. The problem
is that we have no control over what goes on. </p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public static void Main()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>try </p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>yyy a = new yyy();</p>

<p class=MsoNormal>a.abc();</p>

<p class=MsoNormal>Console.WriteLine(&quot;After abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch(Exception e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In Exception &quot; );</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>Console.WriteLine(&quot;At end&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>We add a try and catch block. The try encompasses the code
we want to handle exceptions for. The catch catches the exception so that we
get no dialog box. Thus the code after abc does not get called, the code in the
exception gets called and the code after the catch gets called. Thus no code
after the function that throws the exception will get called. This is how we
can handle exceptions ourselves, use a try catch block</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Console.WriteLine(&quot;In Exception &quot; + e.ToString());</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception System.Exception: Vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>By displaying the exception object e we get the same error
string that we got earlier namely the functions that called the exception which
is called the caller stack. </p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public void abc()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;Start abc&quot;);</p>

<p class=MsoNormal>throw new System.IO.IOException(&quot;Vijay Mukhi&quot;);</p>

<p class=MsoNormal>Console.WriteLine(&quot;End abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception System.IO.IOException: Vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The Exception class handles all exceptions and is it is the
generic base class for all exceptions. The .net framework gives us a zillion
exception handling classes, whenever a IO Exception occurs we should throw the
Io exception instead of the generic exception .This is why the error show that
a IoException has been thrown.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>throw new IndexOutOfRangeException(&quot;vijay Mukhi&quot;);</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception System.IndexOutOfRangeException: vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Whenever we have an array index out of<span
style="mso-spacerun: yes">  </span>bounds we get the above exception thrown. In
real life throw an exception that is appropriate. The other problem is that the
same catch handles all the exceptions. Depending upon the exception thrown we
would like our own catch to be called. </p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public static void Main()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>try </p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>yyy a = new yyy();</p>

<p class=MsoNormal>a.abc();</p>

<p class=MsoNormal>Console.WriteLine(&quot;After abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch(Exception e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In Exception &quot; + e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch ( IndexOutOfRangeException e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In IndexOutOfRangeException &quot; +
e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>Console.WriteLine(&quot;At end&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>a.cs(16,9): error CS0160: A previous catch clause already
catches all exceptions of this or a super type ('System.Exception')</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The class Exception will catch all the exceptions including
IndexOutOfRange and hence the next catch has no meaning. Thus we get an error
and to<span style="mso-spacerun: yes">  </span>remove the error we interchange
the order of exceptions.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public static void Main()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>try </p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>yyy a = new yyy();</p>

<p class=MsoNormal>a.abc();</p>

<p class=MsoNormal>Console.WriteLine(&quot;After abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch ( IndexOutOfRangeException e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In IndexOutOfRangeException &quot; +
e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch(Exception e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In Exception &quot; + e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In IndexOutOfRangeException System.IndexOutOfRangeException:
vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>As we are throwing an index exception as we have such a
catch for the exception it gets called. When we throw an IoException, we are
not specifically catching such a exception and thus it falls down to the
generic Exception catch clause. Thus all exceptions not specially handled will
be caught by the last catch which should always be the generic exception class.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>If we remove the last generic exception catch and change the
throw to IOException, then we see the messy dialog box as we are not handling
the exception. Thus all exceptions not handled by us are handled by the system.
This is why we need to place the default exception class last.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>public static void Main()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>try </p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>yyy a = new yyy();</p>

<p class=MsoNormal>a.abc();</p>

<p class=MsoNormal>Console.WriteLine(&quot;After abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch ( IndexOutOfRangeException e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In IndexOutOfRangeException &quot; +
e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>catch(Exception e)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In Exception &quot; + e.ToString());</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>finally</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;In finally &quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>Console.WriteLine(&quot;At end&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In IndexOutOfRangeException System.IndexOutOfRangeException:
vijay Mukhi</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>In finally</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>We now introduce the finally clause. The finally clause gets
called after the catch gets called. We comment out the throw in the abc
function and yet finally gets called. We then write a return in the first catch
first line, finally yet gets called but the WriteLine does not get called. Thus
come what happens finally always gets called and we place code here that should
get called always at the end of try catch block. </p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>class yyy</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>public void abc()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>Console.WriteLine(&quot;Start abc&quot;);</p>

<p class=MsoNormal>throw new aaa();</p>

<p class=MsoNormal>Console.WriteLine(&quot;End abc&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>class aaa : Exception</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>public aaa()</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception aaa: Exception of type 'aaa' was thrown.</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>An exception is simply a class derived from the class Exception.
Thus aaa is a new exception as it is derived from the class Exception. It is so
simple to create an exception. Now lets add a parameter to the exception aaa.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>throw new aaa(&quot;Vijay&quot;);</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>class aaa : Exception</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>public aaa(string a) : base(a)</p>

<p class=MsoNormal>{</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Start abc</p>

<p class=MsoNormal>In Exception aaa: Vijay</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at yyy.abc()</p>

<p class=MsoNormal><span style="mso-spacerun: yes">   </span>at zzz.Main()</p>

<p class=MsoNormal>At end</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The base keyword calls the base class constructor, if we do
not use this keyword the constructor with no parameter gets called. This is how
we pass parameters to our own exception. What ever we do with the other
exception we can do with ours. In the good old days of C programming we would
call functions to do our job. These functions would return values denoting
success or failure. There was however no consistency in what values were success
or failure. In Unix 1 was considered failure, in windows 0 was success. Some
functions like fopen returned 0 for failure.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The other problem was that if had to check the return value
for each function. Thus if we called 30 functions we had to check for error 30
times, one for each function. There was no central place for error handling, it
was spread all over your code. The third issue was that in constructors we
write lots of code and they do not return values. Thus how do constructors tell
us about errors in code.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The way out is to have the try and catch mechanism to trap
exceptions. Things go wrong the function throws an exception, the other side
catches it. If he does not<span style="mso-spacerun: yes">  </span>the system
is always there.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

</div>

</body>


<!-- Mirrored from www.vijaymukhi.com/seccourse/mar1606/html/exceptionhandling.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 11 Oct 2024 14:42:41 GMT -->
</html>
